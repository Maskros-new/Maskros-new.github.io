<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>STLä½¿ç”¨æ‰‹å†Œ</title>
    <link href="/2021/08/13/STL%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/"/>
    <url>/2021/08/13/STL%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/</url>
    
    <content type="html"><![CDATA[<h1 id="STLä½¿ç”¨æ‰‹å†Œ"><a href="#STLä½¿ç”¨æ‰‹å†Œ" class="headerlink" title="STLä½¿ç”¨æ‰‹å†Œ"></a>STLä½¿ç”¨æ‰‹å†Œ</h1><p>Standard Template Library</p><blockquote><p>åˆåã€ŠğŸ‘´æ€•å¿˜äº†å…ˆæŠŠä»–å†™ä¸‹æ¥ã€‹</p></blockquote><h2 id="æˆ‘-æ˜¯-è°"><a href="#æˆ‘-æ˜¯-è°" class="headerlink" title="æˆ‘ æ˜¯ è° ?"></a>æˆ‘ æ˜¯ è° ?</h2><p>æ–¯ä¸¹å¾·å„¿çš„ å¦æ™®é›·ç‰¹ è±åšç‘ å³æ ‡å‡†æ¨¡æ¿åº“</p><ul><li><p>é‡è¦ç‰¹ç‚¹ï¼šæ•°æ®ç»“æ„å’Œç®—æ³•çš„åˆ†ç¦»</p></li><li><p>é‡è¦ç‰¹æ€§ï¼šä¸æ˜¯é¢å‘å¯¹è±¡çš„</p></li><li><p>é€»è¾‘å±‚æ¬¡ï¼šä½“ç°äº†æ³›å‹åŒ–ç¨‹åºè®¾è®¡çš„æ€æƒ³</p></li><li><p>å®ç°å±‚æ¬¡ï¼šä»¥ä¸€ç§ç±»å‹å‚æ•°åŒ–çš„æ–¹å¼å®ç°ï¼ŒåŸºäºæ¨¡æ¿(template)</p></li></ul><p>å…­å¤§ç»„ä»¶ï¼š</p><ul><li>å®¹å™¨ï¼ˆContainerï¼‰ï¼Œæ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¦‚listï¼Œvectorï¼Œdeques ï¼Œä»¥æ¨¡æ¿ç±»çš„æ–¹æ³•æä¾› ;</li><li>è¿­ä»£å™¨ï¼ˆIteratorï¼‰ï¼Œæä¾›äº†è®¿é—®å®¹å™¨ä¸­å¯¹è±¡çš„æ–¹æ³•ã€‚è¿­ä»£å™¨å°±å¦‚åŒä¸€ä¸ªæŒ‡é’ˆã€‚C++çš„æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§è¿­ä»£å™¨ã€‚è¿­ä»£å™¨ä¹Ÿå¯ä»¥æ˜¯é‚£äº›å®šä¹‰äº†operator*()ä»¥åŠå…¶ä»–ç±»ä¼¼äºæŒ‡é’ˆçš„æ“ä½œç¬¦åœ°æ–¹æ³•çš„ç±»å¯¹è±¡ï¼›</li><li>ç®—æ³•ï¼ˆAlgorithmï¼‰ï¼Œæ˜¯ç”¨æ¥æ“ä½œå®¹å™¨ä¸­çš„æ•°æ®çš„æ¨¡æ¿å‡½æ•°ã€‚å¦‚sort()ï¼Œfind()ï¼Œå‡½æ•°æœ¬èº«ä¸ä»–ä»¬æ“ä½œçš„æ•°æ®çš„ç»“æ„å’Œç±»å‹æ— å…³ ;</li><li>ä»¿å‡½æ•°ï¼ˆFunctorï¼‰</li><li>é€‚é…å™¨ï¼ˆAdaptorï¼‰</li><li>åˆ†é…å™¨ï¼ˆallocatorï¼‰</li></ul><h2 id="ğŸ‘´-å¸¸ç”¨çš„"><a href="#ğŸ‘´-å¸¸ç”¨çš„" class="headerlink" title="ğŸ‘´ å¸¸ç”¨çš„"></a>ğŸ‘´ å¸¸ç”¨çš„</h2><blockquote><p>ä»¥ä¸‹ä¸æŒ‰é¡ºåºï¼Œæƒ³åˆ°å•¥å°±å†™å•¥ï¼Œæœ‰ä¸ªğŸ¥šçš„é¡ºåº</p></blockquote><h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h3><h4 id="string"><a href="#string" class="headerlink" title="string"></a>string</h4><p>å­—ç¬¦ä¸²</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//æ„é€ å‡½æ•°</span><br><span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(str,index)</span></span>; <span class="hljs-comment">//å°†å­—ç¬¦ä¸²strå†…â€œå§‹äºä½ç½®indexâ€çš„éƒ¨åˆ†å½“ä½œå­—ç¬¦ä¸²çš„åˆå€¼</span><br><span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(str,index,n)</span></span>; <span class="hljs-comment">//å°†å­—ç¬¦ä¸²strå†…â€œå§‹äºindexä¸”é•¿åº¦é¡¶å¤šnâ€çš„éƒ¨åˆ†ä½œä¸ºå­—ç¬¦ä¸²çš„åˆå€¼</span><br><span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(n,c)</span></span>; <span class="hljs-comment">//ç”Ÿæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåŒ…å«nä¸ªcå­—ç¬¦(char)</span><br><span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(str.begin(),str.end())</span></span>; <span class="hljs-comment">//ä»¥åŒºé—´begin():end() (ä¸åŒ…å«end())å†…çš„å­—ç¬¦ä½œä¸ºå­—ç¬¦ä¸²sçš„åˆå€¼</span><br><br><span class="hljs-comment">//æ“ä½œå‡½æ•°</span><br>s.<span class="hljs-built_in">erase</span>(s.<span class="hljs-built_in">begin</span>(),s.<span class="hljs-built_in">end</span>()); <span class="hljs-comment">//åˆ é™¤</span><br>s.<span class="hljs-built_in">replace</span>(pos,len,str); <span class="hljs-comment">//æ›¿æ¢ï¼Œä»poså¼€å§‹é•¿ä¸ºlenè¢«æ›¿æ¢ä¸ºstr</span><br>s.<span class="hljs-built_in">find</span>(str,pos=<span class="hljs-number">0</span>); <span class="hljs-comment">//ä»poså‘å³æŸ¥æ‰¾ï¼Œè¿”å›strç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span><br>s.<span class="hljs-built_in">rfind</span>(str,pos=npos); <span class="hljs-comment">//ä»posåå‘æŸ¥æ‰¾ï¼Œè¿”å›æ‰¾åˆ°ä½ç½®</span><br>s.<span class="hljs-built_in">find_first_of</span>(str); <span class="hljs-comment">//æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå±äºsträ¸­å­—ç¬¦çš„ä½ç½®</span><br>s.<span class="hljs-built_in">find_first_not_of</span>(str); <span class="hljs-comment">//æŸ¥æ‰¾ç¬¬ä¸€ä¸ªä¸å±äºsträ¸­å­—ç¬¦ä½ç½®</span><br>s.<span class="hljs-built_in">find_last_of</span>(str);<br>s.<span class="hljs-built_in">find_last_not_of</span>(str);<br>s1.<span class="hljs-built_in">compare</span>(s2); <span class="hljs-comment">//æ¯”è¾ƒï¼Œç›¸ç­‰0å¤§äº1å°äº-1</span><br>s1.<span class="hljs-built_in">compare</span>(pos,len,s2)<span class="hljs-comment">//ä»s1çš„poså¼€å§‹é•¿ä¸ºlenä¸s2æ¯”è¾ƒ</span><br></code></pre></td></tr></table></figure><h4 id="stringstream"><a href="#stringstream" class="headerlink" title="stringstream"></a>stringstream</h4><p>è‡ªåŠ¨ä¸”ç›´æ¥çš„ç±»å‹è½¬æ¢</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++">stringstream sstream;<br><span class="hljs-comment">//æ•°æ®ç±»å‹è½¬æ¢</span><br>string str;<br><span class="hljs-keyword">int</span> a=<span class="hljs-number">123</span>;<br>sstream &lt;&lt; a;<br>sstream &gt;&gt; str;<br>cout&lt;&lt;str;<br>cout&lt;&lt;sstream.<span class="hljs-built_in">str</span>(); <br><span class="hljs-comment">//å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥</span><br>sstream &lt;&lt; <span class="hljs-string">&quot;xxxx&quot;</span> &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; <span class="hljs-string">&quot;aaaaa&quot;</span>;<br><span class="hljs-comment">//æ¸…ç©ºstringstream</span><br>sstream.<span class="hljs-built_in">clear</span>();<br>sstream.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>);<br></code></pre></td></tr></table></figure><h4 id="pair"><a href="#pair" class="headerlink" title="pair"></a>pair</h4><p>ä¾¿æºç»“æ„ä½“</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è®¿é—®é€šè¿‡first second</span><br><span class="hljs-comment">//å¯ä»¥é€šè¿‡ä¸€èˆ¬è¿ç®—ç¬¦æ¯”è¾ƒï¼Œå…ˆæ¯”è¾ƒfirstå†second</span><br><span class="hljs-function">pair&lt;string,<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">p</span> <span class="hljs-params">(str,<span class="hljs-number">123</span>)</span></span>;<br>pair&lt;string,<span class="hljs-keyword">int</span>&gt; p = <span class="hljs-built_in">make_pair</span>(str,<span class="hljs-number">123</span>);<br></code></pre></td></tr></table></figure><h4 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h4><p>å‘é‡å®¹å™¨ï¼ŒåŠ¨æ€å­˜å‚¨</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c++">vector&lt;<span class="hljs-keyword">int</span>&gt; v;<br>v.<span class="hljs-built_in">front</span>(); v.<span class="hljs-built_in">back</span>();<br>v.<span class="hljs-built_in">begin</span>(); v.<span class="hljs-built_in">end</span>();<br>v.<span class="hljs-built_in">push_back</span>();<br>v.<span class="hljs-built_in">size</span>();<br>v.<span class="hljs-built_in">empty</span>();<br>v.<span class="hljs-built_in">clear</span>();<br>v.<span class="hljs-built_in">pop_back</span>(); <span class="hljs-comment">//åˆ é™¤è¡¨å°¾å…ƒç´ </span><br>v.<span class="hljs-built_in">insert</span>(it,x); <span class="hljs-comment">//å‘è¿­ä»£å™¨it æŒ‡å‘çš„å…ƒç´ å‰æ’å…¥æ–°å…ƒç´ x</span><br>v.<span class="hljs-built_in">insert</span>(it,n,x); <span class="hljs-comment">//æ’å…¥nä¸ªx</span><br>v.<span class="hljs-built_in">insert</span>(it, first, last); <span class="hljs-comment">//å°†ç”±è¿­ä»£å™¨firstå’Œlast æ‰€æŒ‡å®šçš„åºåˆ—[first, last)æ’å…¥åˆ°è¿­ä»£å™¨itæŒ‡å‘çš„å…ƒç´ å‰é¢</span><br>v.<span class="hljs-built_in">erase</span>(it); <span class="hljs-comment">//åˆ </span><br>v.<span class="hljs-built_in">erase</span>(first,last);<br>v.<span class="hljs-built_in">reverse</span>(n); <span class="hljs-comment">//é¢„åˆ†é…ç¼“å†²ç©ºé—´ï¼Œä½¿å­˜å‚¨ç©ºé—´è‡³å°‘å¯å®¹çº³nä¸ªå…ƒç´ </span><br>v.<span class="hljs-built_in">resize</span>(n); <span class="hljs-comment">//æ”¹å˜åºåˆ—é•¿åº¦ï¼Œè¶…å‡ºå…ƒç´ åˆ é™¤ï¼Œè‹¥æºç©ºé—´å°äºnï¼Œåˆ™é»˜è®¤å€¼å¡«æ»¡ç©ºé—´</span><br>v.<span class="hljs-built_in">resize</span>(n,val); <span class="hljs-comment">//è¶…å‡ºçš„ç”¨valå¡«æ»¡</span><br></code></pre></td></tr></table></figure><h4 id="stack"><a href="#stack" class="headerlink" title="stack"></a>stack</h4><p>æ ˆ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++">stack&lt;<span class="hljs-keyword">int</span>&gt; s;<br>s.<span class="hljs-built_in">push</span>(x);<br>s.<span class="hljs-built_in">pop</span>();<br>s.<span class="hljs-built_in">top</span>();<br>s.<span class="hljs-built_in">empty</span>();<br>s.<span class="hljs-built_in">size</span>();<br></code></pre></td></tr></table></figure><h4 id="queue"><a href="#queue" class="headerlink" title="queue"></a>queue</h4><p>é˜Ÿåˆ—ï¼Œä¼˜å…ˆé˜Ÿåˆ—ï¼ŒåŒç«¯é˜Ÿåˆ—</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// queue</span><br>queue&lt;<span class="hljs-keyword">int</span>&gt; q;<br>q.<span class="hljs-built_in">push</span>(x);<br>q.<span class="hljs-built_in">pop</span>();<br>q.<span class="hljs-built_in">front</span>(); q.<span class="hljs-built_in">back</span>();<br>q.<span class="hljs-built_in">empty</span>();<br>q.<span class="hljs-built_in">size</span>();<br><br><span class="hljs-comment">// priority_queue</span><br>priority&lt;<span class="hljs-keyword">int</span>&gt; q; <span class="hljs-comment">//é»˜è®¤å¤§è€…ä¼˜å…ˆ</span><br>priority&lt;<span class="hljs-keyword">int</span>, vector&lt;<span class="hljs-keyword">int</span>&gt;, greater&lt;<span class="hljs-keyword">int</span>&gt; &gt; q; <span class="hljs-comment">//å°çš„å…ˆå‡ºé˜Ÿ ä¸‰ä¸ªæ¨¡æ¿å‚æ•°ï¼šå…ƒç´ ç±»å‹ï¼Œå®¹å™¨ç±»å‹ï¼Œæ¯”è¾ƒç®—å­</span><br><span class="hljs-comment">// ä¼˜å…ˆçº§è®¾ç½®ï¼šå®šä¹‰ç»“æ„ä½“</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Student</span>&#123;</span><br>    <span class="hljs-keyword">int</span> num;<br>    <span class="hljs-keyword">int</span> grade;<br>    <span class="hljs-keyword">friend</span> <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span> &lt; (Student s1, Student s2)&#123;<br>        <span class="hljs-keyword">return</span> s1.grade&lt;s2.grade;<br>        <span class="hljs-comment">//æ­¤å¤„å°äºå·è¿˜æ˜¯å°äºçš„ä½œç”¨ï¼Œæ•…é˜Ÿåˆ—ä¸­ä»¥æˆç»©é«˜çš„å­¦ç”Ÿä¼˜å…ˆï¼Œè‹¥åä¹‹å˜å·å³å¯</span><br>    &#125;<br>&#125;;<br>priority_queue&lt;Student&gt; q;<br><span class="hljs-comment">//ä¹Ÿå¯ä»¥æŠŠé‡è½½çš„å‡½æ•°å†™åœ¨ç»“æ„ä½“å¤–é¢</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">cmp</span>&#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span> <span class="hljs-params">(Student s1, Student s2)</span></span>&#123;<br>        <span class="hljs-keyword">return</span> s1.grade&lt;s2.grade;<br>    &#125;<br>&#125;;<span class="hljs-comment">//tips:ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„cmpå’Œsortä¸­çš„cmpæ•ˆæœç›¸å</span><br>priority_queue&lt;Student,vector&lt;Student&gt;,cmp&gt; q;<br><span class="hljs-comment">//å¦‚æœç»“æ„ä½“å†…æ•°æ®åºå¤§ï¼Œåƒå‡ºç°å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼Œå»ºè®®ä½¿ç”¨å¼•ç”¨æ¥æé«˜æ•ˆç‡ã€‚æ­¤æ—¶æ¯”è¾ƒç±»çš„å‚æ•°éœ€è¦åŠ ä¸Š const å’Œ &amp;</span><br><span class="hljs-keyword">friend</span> <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-keyword">const</span> Student &amp;s1, <span class="hljs-keyword">const</span> Student &amp;s2)&#123;<br><span class="hljs-keyword">return</span> s1.grade&lt;s2.grade;<br>&#125;<br><br><span class="hljs-comment">//deque</span><br>deque&lt;<span class="hljs-keyword">int</span>&gt; d;<br>d.<span class="hljs-built_in">push_back</span>(x); <span class="hljs-comment">//å°¾éƒ¨æ’å…¥</span><br>d.<span class="hljs-built_in">push_front</span>(x); <span class="hljs-comment">//é¦–éƒ¨æ’å…¥å…ƒç´ </span><br>d.<span class="hljs-built_in">insert</span>(d.<span class="hljs-built_in">begin</span>()+len,x); <span class="hljs-comment">//ä¸­é—´æ’å…¥å…ƒç´ </span><br><span class="hljs-comment">//å¯ä»¥é€šè¿‡ d[0] d[1] è®¿é—®</span><br>d.<span class="hljs-built_in">pop_front</span>(); <span class="hljs-comment">//åˆ é™¤å¤´éƒ¨</span><br>d.<span class="hljs-built_in">pop_back</span>();<br>d.<span class="hljs-built_in">erase</span>(d.<span class="hljs-built_in">begin</span>()+len); <span class="hljs-comment">//åˆ é™¤æŒ‡å®šä½ç½®å…ƒç´ ï¼Œå¯ä»¥å†™å¤šä¸ª</span><br></code></pre></td></tr></table></figure><h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>é”®å€¼å¯¹ï¼Œå…ƒç´ æŒ‰å…³é”®å­—æœ‰åºï¼Œå†…éƒ¨çº¢é»‘æ ‘</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// mapç©ºé—´å ç”¨ç‡é«˜</span><br>map&lt;string,<span class="hljs-keyword">int</span>&gt; m;<br>m[key]=value;<br>m.<span class="hljs-built_in">insert</span>(<span class="hljs-built_in">make_pair</span>(key,value));<br>m.<span class="hljs-built_in">erase</span>(key);<br>m.<span class="hljs-built_in">erase</span>(it);<br>m.<span class="hljs-built_in">clear</span>();<br>m.<span class="hljs-built_in">size</span>();<br>map&lt;string,<span class="hljs-keyword">int</span>&gt;::iterator it;<br><span class="hljs-keyword">for</span>(it=mp.<span class="hljs-built_in">begin</span>();it!=mp.<span class="hljs-built_in">end</span>();++it)&#123;<br>    cout&lt;&lt;it-&gt;first&lt;&lt;<span class="hljs-string">&quot; &quot;</span>&lt;&lt;it-&gt;second&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-comment">// unordered_map æ•ˆç‡è¾ƒé«˜ å†…éƒ¨å“ˆå¸Œè¡¨</span><br><span class="hljs-comment">// å¯¹äºæŸ¥æ‰¾é—®é¢˜ï¼Œunordered_mapä¼šæ›´åŠ é«˜æ•ˆä¸€äº›ï¼Œå› æ­¤é‡åˆ°æŸ¥æ‰¾é—®é¢˜ï¼Œå¸¸ä¼šè€ƒè™‘ä¸€ä¸‹ç”¨unordered_map</span><br></code></pre></td></tr></table></figure><h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><p>æ— é‡å¤ï¼ŒæŒ‰é”®å€¼è‡ªåŠ¨æ’åº</p><p>æ•°æ®ç»“æ„ä¸ºçº¢é»‘æ ‘ã€‚ä»¥èŠ‚ç‚¹å½¢å¼ä¿å­˜ï¼ˆåŠ¨æ€)ï¼Œç”¨è¿­ä»£å™¨è®¿é—®</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++">set&lt;<span class="hljs-keyword">int</span>&gt; s;<br>s.<span class="hljs-built_in">begin</span>(); s.<span class="hljs-built_in">end</span>();<br>s.<span class="hljs-built_in">clear</span>();<br>s.<span class="hljs-built_in">empty</span>();<br>s.<span class="hljs-built_in">erase</span>(x);<br>s.<span class="hljs-built_in">find</span>(x);<br>s.<span class="hljs-built_in">insert</span>(x);<br>s.<span class="hljs-built_in">size</span>();<br>s.<span class="hljs-built_in">lower_bound</span>(value); <span class="hljs-comment">//è¿”å›ç¬¬ä¸€ä¸ªå¤§äºç­‰äºvalueçš„å®šä½å™¨</span><br>s.<span class="hljs-built_in">upper_bound</span>(value); <span class="hljs-comment">//è¿”å›æœ€åä¸€ä¸ªå¤§äºç­‰äºvalueçš„å®šä½å™¨</span><br>set&lt;<span class="hljs-keyword">int</span>&gt;::iterator it;<br><span class="hljs-keyword">for</span>(it=s.<span class="hljs-built_in">begin</span>();it!=s.<span class="hljs-built_in">end</span>();it++)<br>cout&lt;&lt;*it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br></code></pre></td></tr></table></figure><h4 id="list"><a href="#list" class="headerlink" title="list"></a>list</h4><p>é“¾è¡¨</p><ul><li>å¦‚æœä½ éœ€è¦é«˜æ•ˆçš„éšå³å­˜å–ï¼Œè€Œä¸åœ¨ä¹æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡ï¼Œä½¿ç”¨vector </li><li>å¦‚æœä½ éœ€è¦å¤§é‡çš„æ’å…¥å’Œåˆ é™¤ï¼Œè€Œä¸å…³å¿ƒéšå³å­˜å–ï¼Œåˆ™åº”ä½¿ç”¨list </li><li>å¦‚æœä½ éœ€è¦éšå³å­˜å–ï¼Œè€Œä¸”å…³å¿ƒä¸¤ç«¯æ•°æ®çš„æ’å…¥å’Œåˆ é™¤ï¼Œåˆ™åº”ä½¿ç”¨deque</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function">list&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(n)</span></span>;<br>list&lt;<span class="hljs-keyword">int</span>&gt; a&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;;<br>a.<span class="hljs-built_in">push_back</span>(x);<br>a.<span class="hljs-built_in">push_front</span>(x);<br>a.<span class="hljs-built_in">empty</span>();<br>a.<span class="hljs-built_in">resize</span>(n);<br>a.<span class="hljs-built_in">clear</span>();<br>a.<span class="hljs-built_in">front</span>(); a.<span class="hljs-built_in">back</span>();<br>a.<span class="hljs-built_in">reverse</span>();<br>a.<span class="hljs-built_in">merge</span>(b); <span class="hljs-comment">//bå˜ç©ºï¼Œaå°¾æ’å…¥b</span><br>a.<span class="hljs-built_in">insert</span>(pos,x);<br>a.<span class="hljs-built_in">insert</span>(pos,b.<span class="hljs-built_in">begin</span>(),b.<span class="hljs-built_in">end</span>());<br>a.<span class="hljs-built_in">erase</span>(a.<span class="hljs-built_in">begin</span>(),a.<span class="hljs-built_in">end</span>());<br>a.<span class="hljs-built_in">remove</span>(x);<br></code></pre></td></tr></table></figure><h4 id="bitset"><a href="#bitset" class="headerlink" title="bitset"></a>bitset</h4><p>å­˜æ”¾äºŒè¿›åˆ¶0/1çš„å®¹å™¨ï¼Œå¯ä»¥å£°æ˜éå¸¸å¤§çš„äºŒè¿›åˆ¶ä½è€Œä¸é™äº64ï¼Œç”¨æ¥ä¼˜åŒ–</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++">bitset&lt;N&gt; b; <span class="hljs-comment">//è¡¨ç¤ºé•¿ä¸ºNçš„äºŒè¿›åˆ¶ä¸²</span><br><span class="hljs-comment">// é€šè¿‡b[pos]è®¿é—®</span><br>b.<span class="hljs-built_in">any</span>(); <span class="hljs-comment">//å­˜åœ¨ä¸º1çš„äºŒè¿›åˆ¶ä½</span><br>b.<span class="hljs-built_in">none</span>(); <span class="hljs-comment">//ä¸å­˜åœ¨ä¸º1çš„äºŒè¿›åˆ¶ä½</span><br>b.<span class="hljs-built_in">count</span>(); <span class="hljs-comment">//ç½®1çš„äºŒè¿›åˆ¶ä½çš„ä¸ªæ•°</span><br>b.<span class="hljs-built_in">size</span>();<br>b.<span class="hljs-built_in">test</span>(pos); <span class="hljs-comment">//åœ¨posä½å¤„æ˜¯å¦ä¸º1</span><br>b.<span class="hljs-built_in">set</span>(); <span class="hljs-comment">//æ‰€æœ‰ä½ç½®1</span><br>b.<span class="hljs-built_in">set</span>(pos);<br>b.<span class="hljs-built_in">reset</span>(); <span class="hljs-comment">//æ‰€æœ‰ä½ç½®0</span><br>b.<span class="hljs-built_in">reset</span>(pos);<br>b.<span class="hljs-built_in">flip</span>(); <span class="hljs-comment">//é€ä½å–å</span><br>b.<span class="hljs-built_in">flip</span>(pos);<br></code></pre></td></tr></table></figure><h3 id="functions"><a href="#functions" class="headerlink" title="functions"></a>functions</h3><h4 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">lower_bound</span>(a,a+n,x); <span class="hljs-comment">//äºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„ä½ç½®</span><br><span class="hljs-built_in">upper_bound</span>(a,a+n,x); <span class="hljs-comment">//äºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºxçš„ä½ç½®</span><br><span class="hljs-built_in">find</span>();<br><span class="hljs-built_in">rfind</span>();<br></code></pre></td></tr></table></figure><h4 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">sort</span>(a,a+n,cmp); <span class="hljs-comment">//é»˜è®¤ASC</span><br></code></pre></td></tr></table></figure><h4 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">swap</span>(a,b); <span class="hljs-comment">//äº¤æ¢</span><br><span class="hljs-built_in">replace</span>(pos,len,str); <span class="hljs-comment">//æ›¿æ¢</span><br><span class="hljs-built_in">unique</span>(a,a+n); <span class="hljs-comment">//å»é™¤ç›¸é‚»çš„é‡å¤å…ƒç´ ,ä¼šæŠŠé‡å¤çš„è—åˆ°æœ«å°¾ï¼Œä½¿ç”¨å‰éœ€è¦å…ˆæ’åº</span><br></code></pre></td></tr></table></figure><h4 id="æ’åˆ—"><a href="#æ’åˆ—" class="headerlink" title="æ’åˆ—"></a>æ’åˆ—</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">next_permutation</span>(a,a+n); <span class="hljs-comment">//ä¸‹ä¸€ä¸ªå…¨æ’åˆ—</span><br><span class="hljs-built_in">prev_permutation</span>(a,a+n); <span class="hljs-comment">//ä¸Šä¸€ä¸ªå…¨æ’åˆ—</span><br><span class="hljs-comment">//å‡½æ•°è¿”å›boolå€¼ï¼Œä¸€èˆ¬é…åˆwhile()</span><br></code></pre></td></tr></table></figure><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-built_in">isalpha</span>(<span class="hljs-keyword">char</span> x); <span class="hljs-comment">//å°å†™å­—æ¯è¿”å›2ï¼Œå¤§å†™å­—æ¯1ï¼Œéå­—æ¯0</span><br><span class="hljs-built_in">tolower</span>(<span class="hljs-keyword">char</span> x); <span class="hljs-built_in">toupper</span>(<span class="hljs-keyword">char</span> x); <span class="hljs-comment">//è¿”å›å°å†™ï¼Œå¤§å†™å­—æ¯çš„ASCIIå€¼ï¼Œéå­—æ¯åˆ™ç›¸ç­‰</span><br><span class="hljs-comment">//æµ·ä¼¦å…¬å¼</span><br>p=(a+b+c)/<span class="hljs-number">2</span>;<br>s=<span class="hljs-built_in">sqrt</span>(p*(p-a)*(p-b)*(p-c));<br><span class="hljs-built_in">abs</span>(<span class="hljs-keyword">int</span> x); <span class="hljs-comment">//åªç”¨äºæ•´æ•°</span><br><span class="hljs-built_in">fabs</span>(<span class="hljs-keyword">double</span> x); <span class="hljs-comment">//ç²¾åº¦æ›´é«˜</span><br></code></pre></td></tr></table></figure><hr><p>æš‚æ—¶å°±è¿™äº›äº†ï¼Œå¯„ï¼</p>]]></content>
    
    
    <categories>
      
      <category>ALGORITHMS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
      <tag>note</tag>
      
      <tag>ACM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘ç¡®å®ä¸ä¼šçº¿æ®µæ ‘</title>
    <link href="/2021/08/06/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    <url>/2021/08/06/%E7%BA%BF%E6%AE%B5%E6%A0%91/</url>
    
    <content type="html"><![CDATA[<h1 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h1><p>Segment Tree</p><blockquote><p>ä¸€ä¸ªé—®é¢˜ï¼Œåªè¦èƒ½åŒ–æˆå¯¹ä¸€äº›è¿ç»­ç‚¹çš„ä¿®æ”¹å’Œç»Ÿè®¡é—®é¢˜ï¼ŒåŸºæœ¬å°±å¯ä»¥ç”¨çº¿æ®µæ ‘æ¥è‰¹äº†</p></blockquote><hr><p>åŸç†ï¼šå°†[1,n]åˆ†è§£æˆè‹¥å¹²ç‰¹å®šçš„å­åŒºé—´(æ•°é‡ä¸è¶…è¿‡4*n),ç„¶åï¼Œå°†æ¯ä¸ªåŒºé—´[L,R]éƒ½åˆ†è§£ä¸ºå°‘é‡ç‰¹å®šçš„å­åŒºé—´ï¼Œé€šè¿‡å¯¹è¿™äº›å°‘é‡å­åŒºé—´çš„ä¿®æ”¹æˆ–è€…ç»Ÿè®¡ï¼Œæ¥å®ç°å¿«é€Ÿå¯¹[L,R]çš„ä¿®æ”¹æˆ–è€…ç»Ÿè®¡ã€‚æ¯ä¸€ä¸ªéå¶ç»“ç‚¹æ‰€è¡¨ç¤ºçš„ç»“ç‚¹[a,b]ï¼Œå…¶å·¦å„¿å­è¡¨ç¤ºçš„åŒºé—´ä¸º[a,(a+b)/2]ï¼Œå³å„¿å­è¡¨ç¤ºçš„åŒºé—´ä¸º[(a+b)/2,b]ã€‚</p><p>ä½œç”¨ï¼šå¯¹ç¼–å·è¿ç»­çš„ä¸€äº›ç‚¹çš„åŒºé—´ä¿¡æ¯è¿›è¡Œä¿®æ”¹æˆ–è€…ç»Ÿè®¡æ“ä½œï¼Œç”¨çº¿æ®µæ ‘ç»Ÿè®¡çš„ä¸œè¥¿ï¼Œå¿…é¡»ç¬¦åˆ<strong>åŒºé—´åŠ æ³•</strong>ã€‚ä¸æ ‘çŠ¶æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œçº¿æ®µæ ‘ä¸æ­¢é€‚ç”¨äºåŒºé—´æ±‚å’Œçš„æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥è¿›è¡ŒåŒºé—´æœ€å¤§å€¼ï¼ŒåŒºé—´æœ€å°å€¼ï¼Œæˆ–è€…åŒºé—´å¼‚æˆ–å€¼çš„æŸ¥è¯¢ã€‚</p><p>ä¸»è¦æ“ä½œï¼šåŒºé—´æŸ¥è¯¢ã€ç‚¹æ›´æ–°ã€åŒºé—´æ›´æ–°</p><p>ä¾‹å¦‚ï¼š</p><ul><li>ç»™å®šså’Œtï¼Œæ±‚å…¶åŒºé—´ä¸Šçš„æœ€å°å€¼</li><li>ç»™å®šiå’Œxï¼ŒæŠŠaiçš„å€¼æ”¹æˆx</li></ul><p>æ›´æ–°å’ŒåŒºé—´æŸ¥è¯¢çš„å¤æ‚åº¦éƒ½æ˜¯ <strong>O(log(N))</strong></p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><blockquote><p>build, update(å†…å«push_down), query</p></blockquote><h3 id="å»ºæ ‘-build"><a href="#å»ºæ ‘-build" class="headerlink" title="å»ºæ ‘ (build)"></a>å»ºæ ‘ (build)</h3><p>çº¿æ®µæ ‘æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”ä¸€æ¡çº¿æ®µ(åŒºé—´)ï¼Œåä¹‹ä¸æˆç«‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ $p$ çš„å·¦å³å­èŠ‚ç‚¹çš„ç¼–å·åˆ†åˆ«ä¸º $2p$ å’Œ $2p+1$ ï¼Œå‡å¦‚èŠ‚ç‚¹ $p$ å‚¨å­˜åŒºé—´ $[a,b]$ çš„å’Œï¼Œè®¾ $mid=[\frac{l+r}{2}]$ï¼Œé‚£ä¹ˆä¸¤ä¸ªå­èŠ‚ç‚¹åˆ†åˆ«å‚¨å­˜ $[l,mid]$ å’Œ $[mid+1,r]$ çš„å’Œã€‚å¯ä»¥å‘ç°ï¼Œå·¦èŠ‚ç‚¹å¯¹åº”çš„åŒºé—´é•¿åº¦ï¼Œä¸å³èŠ‚ç‚¹ç›¸åŒæˆ–è€…æ¯”ä¹‹æ°å¥½å¤š $1$ã€‚</p><p>æ•…å»ºæ ‘å¯è€ƒè™‘é€’å½’è¿›è¡Œï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">build</span><span class="hljs-params">(ll l = <span class="hljs-number">1</span>, ll r = n, ll p = <span class="hljs-number">1</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (l == r) <span class="hljs-comment">// åˆ°è¾¾å¶å­èŠ‚ç‚¹</span><br>        tree[p]=A[l]; <span class="hljs-comment">// ç”¨æ•°ç»„ä¸­çš„æ•°æ®èµ‹å€¼</span><br>    <span class="hljs-keyword">else</span>&#123;<br>        ll mid = (l + r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">build</span>(l, mid, p * <span class="hljs-number">2</span>); <span class="hljs-comment">// å…ˆå»ºç«‹å·¦å³å­èŠ‚ç‚¹</span><br>        <span class="hljs-built_in">build</span>(mid + <span class="hljs-number">1</span>, r, p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>);<br>        tree[p] = tree[p * <span class="hljs-number">2</span>] + tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]; <span class="hljs-comment">// è¯¥èŠ‚ç‚¹çš„å€¼ç­‰äºå·¦å³å­èŠ‚ç‚¹ä¹‹å’Œ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p> è¿™é‡ŒğŸ‘´å·äº†ä¸ª gif æ¥æ¼”ç¤ºä¸€ä¸‹è¿‡ç¨‹ (è™½ç„¶å¤§éƒ¨åˆ†éƒ½æ˜¯å·çš„ğŸ¤¡)</p><img src="https://pic4.zhimg.com/v2-c2d11b12c87b6a7076e3df0bb3585423_b.webp" alt="img" style="zoom:60%;" /><h3 id="åŒºé—´ä¿®æ”¹-update"><a href="#åŒºé—´ä¿®æ”¹-update" class="headerlink" title="åŒºé—´ä¿®æ”¹(update)"></a>åŒºé—´ä¿®æ”¹(update)</h3><p>é¦–å…ˆå®šä¹‰â€<strong>æ‡’æ ‡è®°</strong>â€œ(å³â€œå»¶è¿Ÿæ ‡è®°â€) <code>mark[]</code>ï¼š</p><p>å¯¹äºåŒºé—´ä¿®æ”¹ï¼Œæœ´ç´ çš„æƒ³æ³•æ˜¯ç”¨<strong>é€’å½’</strong>çš„æ–¹å¼ä¸€å±‚å±‚ä¿®æ”¹ï¼ˆç±»ä¼¼äºçº¿æ®µæ ‘çš„å»ºç«‹ï¼‰ï¼Œä½†è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ã€‚ä½¿ç”¨æ‡’æ ‡è®°åï¼Œå¯¹äºé‚£äº›æ­£å¥½æ˜¯çº¿æ®µæ ‘èŠ‚ç‚¹çš„åŒºé—´ï¼Œæˆ‘ä»¬ä¸ç»§ç»­é€’å½’ä¸‹å»ï¼Œè€Œæ˜¯æ‰“ä¸Šä¸€ä¸ª<strong>æ ‡è®°</strong>ï¼Œå°†æ¥è¦ç”¨åˆ°å®ƒçš„<strong>å­åŒºé—´</strong>çš„æ—¶å€™ï¼Œå†å‘ä¸‹<strong>ä¼ é€’</strong></p><p>ç›´æ¥ä¸ŠğŸ´ (éæœ€ç®€):</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(ll l, ll r, ll d, ll p = <span class="hljs-number">1</span>, ll cl = <span class="hljs-number">1</span>, ll cr = n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl &gt; r || cr &lt; l) <span class="hljs-comment">// åŒºé—´æ— äº¤é›†</span><br>        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å‰ªæ</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cl &gt;= l &amp;&amp; cr &lt;= r) <span class="hljs-comment">// å½“å‰èŠ‚ç‚¹å¯¹åº”çš„åŒºé—´åŒ…å«åœ¨ç›®æ ‡åŒºé—´ä¸­</span><br>    &#123;<br>        tree[p] += (cr - cl + <span class="hljs-number">1</span>) * d; <span class="hljs-comment">// æ›´æ–°å½“å‰åŒºé—´çš„å€¼</span><br>        <span class="hljs-keyword">if</span> (cr &gt; cl) <span class="hljs-comment">// å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹</span><br>            mark[p] += d; <span class="hljs-comment">// ç»™å½“å‰åŒºé—´æ‰“ä¸Šæ ‡è®°</span><br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-comment">// ä¸ç›®æ ‡åŒºé—´æœ‰äº¤é›†ï¼Œä½†ä¸åŒ…å«äºå…¶ä¸­</span><br>    &#123;<br>        ll mid = (cl + cr) / <span class="hljs-number">2</span>;<br>        mark[p * <span class="hljs-number">2</span>] += mark[p]; <span class="hljs-comment">// æ ‡è®°å‘ä¸‹ä¼ é€’</span><br>        mark[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p];<br>        tree[p * <span class="hljs-number">2</span>] += mark[p] * (mid - cl + <span class="hljs-number">1</span>); <span class="hljs-comment">// å¾€ä¸‹æ›´æ–°ä¸€å±‚</span><br>        tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p] * (cr - mid);<br>        mark[p] = <span class="hljs-number">0</span>; <span class="hljs-comment">// æ¸…é™¤æ ‡è®°</span><br>        <span class="hljs-built_in">update</span>(l, r, d, p * <span class="hljs-number">2</span>, cl, mid); <span class="hljs-comment">// é€’å½’åœ°å¾€ä¸‹å¯»æ‰¾</span><br>        <span class="hljs-built_in">update</span>(l, r, d, p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr);<br>        tree[p] = tree[p * <span class="hljs-number">2</span>] + tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]; <span class="hljs-comment">// æ ¹æ®å­èŠ‚ç‚¹æ›´æ–°å½“å‰èŠ‚ç‚¹çš„å€¼</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä»æœ€å¤§çš„åŒºé—´å¼€å§‹ï¼Œé€’å½’å‘ä¸‹å¤„ç†ã€‚æ³¨æ„åˆ°ï¼Œ<strong>ä»»ä½•åŒºé—´éƒ½æ˜¯çº¿æ®µæ ‘ä¸ŠæŸäº›èŠ‚ç‚¹çš„å¹¶é›†</strong>ã€‚äºæ˜¯æˆ‘ä»¬è®°ç›®æ ‡åŒºé—´ä¸º $[l,r] $ï¼Œå½“å‰åŒºé—´ä¸º $[cl,cr]$ ï¼Œ å½“å‰èŠ‚ç‚¹ä¸º $p$ ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸‰ç§æƒ…å†µï¼š</p><ol><li><p>å½“å‰åŒºé—´ä¸ç›®æ ‡åŒºé—´æ²¡æœ‰äº¤é›†ï¼š</p><p>ç›´æ¥ç»“æŸé€’å½’</p></li><li><p>å½“å‰åŒºé—´è¢«åŒ…æ‹¬åœ¨ç›®æ ‡åŒºé—´é‡Œï¼š</p><p>å¯ä»¥æ›´æ–°åŒºé—´ï¼Œä¸èƒ½å¿˜è®°ä¹˜ä¸ŠåŒºé—´é•¿åº¦</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">tree[p] += (cr - cl + <span class="hljs-number">1</span>) * d;<br></code></pre></td></tr></table></figure><p>ç„¶åæ‰“ä¸Šæ‡’æ ‡è®°ï¼ˆå¶å­èŠ‚ç‚¹å¯ä»¥ä¸æ‰“æ ‡è®°ï¼Œå› ä¸ºä¸ä¼šå†å‘ä¸‹ä¼ é€’äº†ï¼‰</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">mark[p] += d;<span class="hljs-comment">//è¡¨ç¤ºâ€œè¯¥åŒºé—´ä¸Šæ¯ä¸€ä¸ªç‚¹éƒ½è¦åŠ ä¸Šdâ€ã€‚å› ä¸ºåŸæ¥å¯èƒ½å­˜åœ¨æ ‡è®°ï¼Œæ‰€ä»¥æ˜¯+=è€Œä¸æ˜¯=</span><br></code></pre></td></tr></table></figure></li><li><p>å½“å‰åŒºé—´ä¸ç›®æ ‡åŒºé—´ç›¸äº¤ï¼Œä½†ä¸åŒ…å«äºå…¶ä¸­:</p><p>è¿™æ—¶æŠŠå½“å‰åŒºé—´ä¸€åˆ†ä¸ºäºŒï¼Œåˆ†åˆ«è¿›è¡Œå¤„ç†ã€‚å¦‚æœå­˜åœ¨æ‡’æ ‡è®°ï¼Œè¦å…ˆæŠŠæ‡’æ ‡è®°ä¼ é€’ç»™å­èŠ‚ç‚¹ï¼ˆæ³¨æ„ä¹Ÿæ˜¯+=ï¼Œå› ä¸ºåŸæ¥å¯èƒ½å­˜åœ¨æ‡’æ ‡è®°)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">ll mid = (cl + cr) / <span class="hljs-number">2</span>;<br>mark[p * <span class="hljs-number">2</span>] += mark[p];<br>mark[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p];<br></code></pre></td></tr></table></figure><p>ä¸¤ä¸ªå­èŠ‚ç‚¹çš„å€¼ä¹Ÿå°±éœ€è¦ç›¸åº”çš„æ›´æ–°ï¼ˆåé¢ä¹˜çš„æ˜¯åŒºé—´é•¿åº¦) :[p * 2] += mark[p] * (mid - cl + 1);</p><p>tree[p * 2 + 1] += mark[p] * (cr - mid);</p><p>ä¸è¦å¿˜è®°æ¸…é™¤è¯¥èŠ‚ç‚¹çš„æ‡’æ ‡è®°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">mark[p]=<span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><p>å› ä¸ºè´µæ ‡è®°å’ŒğŸ‘´ä¸€æ ·æ˜¯ä¸ªæ‡’è›‹ï¼Œåªå¾€ä¸‹ä¼ é€’ä¸€å±‚ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¹¶ä¸æ˜¯é€’å½’çš„ï¼Œä»¥åè¦ç”¨å†æ‰ç»§ç»­ä¼ é€’ã€‚å…¶å®æˆ‘ä»¬å¸¸å¸¸æŠŠè¿™ä¸ªä¼ é€’è¿‡ç¨‹å°è£…æˆä¸€ä¸ªå‡½æ•°<strong>æ‰‘å±è£†</strong> :</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(ll p, ll len)</span></span>&#123;<br>    mark[p * <span class="hljs-number">2</span>] += mark[p];<br>    mark[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p];<br>    tree[p * <span class="hljs-number">2</span>] += mark[p] * (len - len / <span class="hljs-number">2</span>);<br>    tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p] * (len / <span class="hljs-number">2</span>); <span class="hljs-comment">// å³è¾¹çš„åŒºé—´å¯èƒ½è¦çŸ­ä¸€ç‚¹</span><br>    mark[p] = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//è¿™æ ·å„¿ update() é‡Œé¢è°ƒç”¨çš„æ—¶å€™ç›´æ¥ push_down(p, cr - cl + 1); å°±å½³äº</span><br></code></pre></td></tr></table></figure><p>ä¼ é€’å®Œæ ‡è®°åï¼Œå†é€’å½’åœ°å»å¤„ç†å·¦å³ä¸¤ä¸ªå­èŠ‚ç‚¹å°±å½³äºä¹</p></li></ol><p>ä¸‹é¢å„¿ğŸ‘´åˆå·äº†ä¸ªè§†é¢‘å±•ç¤ºä¸€ä¸‹åŒºé—´ $[1,4]$ åŠ ä¸Š $1$ çš„è¿‡ç¨‹ï¼š</p><p><video width=70% src="https://vdn1.vzuu.com/SD/534181e0-23ad-11eb-905e-ca0d7949bec0.mp4?disable_local_cache=1&auth_key=1628242679-0-0-804945d6146979c7aa1236d8806960d8&f=mp4&bu=pico&expiration=1628242679&v=hw"></video></p><p>è‡³äºå•ç‚¹ä¿®æ”¹ï¼Œåªéœ€è¦ä»¤å·¦å³ç«¯ç‚¹ç›¸ç­‰å³å¯~</p><h3 id="åŒºé—´æŸ¥è¯¢-query"><a href="#åŒºé—´æŸ¥è¯¢-query" class="headerlink" title="åŒºé—´æŸ¥è¯¢(query)"></a>åŒºé—´æŸ¥è¯¢(query)</h3><p>è¿˜å°±é‚£ä¸ªç›´æ¥ä¸ŠğŸ´</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(ll l, ll r, ll p = <span class="hljs-number">1</span>, ll cl = <span class="hljs-number">1</span>, ll cr = n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl &gt; r || cr &lt; l)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cl &gt;= l &amp;&amp; cr &lt;= r)<br>        <span class="hljs-keyword">return</span> tree[p];<br>    <span class="hljs-keyword">else</span>&#123;<br>        ll mid = (cl + cr) / <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">push_down</span>(p, cr - cl + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(l, r, p * <span class="hljs-number">2</span>, cl, mid) + <span class="hljs-built_in">query</span>(l, r, p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr); <br>        <span class="hljs-comment">// ä¸Šä¸€è¡Œæ‹†æˆä¸‰è¡Œå†™å°±å’ŒåŒºé—´ä¿®æ”¹æ ¼å¼ä¸€è‡´äº†</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€æ ·çš„é€’å½’ï¼Œä¸€æ ·è‡ªé¡¶è‡³åº•åœ°å¯»æ‰¾ï¼Œä¸€æ ·çš„åˆå¹¶ä¿¡æ¯ï¼Œå³æ’å³ç”¨ğŸ˜</p><h2 id="æ¨¡æ¿"><a href="#æ¨¡æ¿" class="headerlink" title="æ¨¡æ¿"></a>æ¨¡æ¿</h2><blockquote><p>source : <strong>æ´›è°·P3372 ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘ 1</strong></p><p><strong>é¢˜ç›®æè¿°</strong><br>å¦‚é¢˜ï¼Œå·²çŸ¥ä¸€ä¸ªæ•°åˆ—ï¼Œä½ éœ€è¦è¿›è¡Œä¸‹é¢ä¸¤ç§æ“ä½œï¼š<br>1.å°†æŸåŒºé—´æ¯ä¸€ä¸ªæ•°åŠ ä¸Šx<br>2.æ±‚å‡ºæŸåŒºé—´æ¯ä¸€ä¸ªæ•°çš„å’Œ<br><strong>è¾“å…¥æ ¼å¼</strong><br>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°Nã€Mï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥æ•°åˆ—æ•°å­—çš„ä¸ªæ•°å’Œæ“ä½œçš„æ€»ä¸ªæ•°ã€‚<br>ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ï¼Œå…¶ä¸­ç¬¬iä¸ªæ•°å­—è¡¨ç¤ºæ•°åˆ—ç¬¬ié¡¹çš„åˆå§‹å€¼ã€‚<br>æ¥ä¸‹æ¥Mè¡Œæ¯è¡ŒåŒ…å«3æˆ–4ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br>æ“ä½œ1ï¼š æ ¼å¼ï¼š1 x y k å«ä¹‰ï¼šå°†åŒºé—´[x,y]å†…æ¯ä¸ªæ•°åŠ ä¸Šk<br>æ“ä½œ2ï¼š æ ¼å¼ï¼š2 x y å«ä¹‰ï¼šè¾“å‡ºåŒºé—´[x,y]å†…æ¯ä¸ªæ•°çš„å’Œ<br><strong>è¾“å‡ºæ ¼å¼</strong><br>è¾“å‡ºåŒ…å«è‹¥å¹²è¡Œæ•´æ•°ï¼Œå³ä¸ºæ‰€æœ‰æ“ä½œ2çš„ç»“æœã€‚</p></blockquote><hr><p>tips: æœ¬æ¨¡æ¿åˆ†ä¸ºé¾™é¸£ç‰ˆå’Œè´µæ—ç‰ˆ</p><h3 id="é¾™é¸£version"><a href="#é¾™é¸£version" class="headerlink" title="é¾™é¸£version"></a>é¾™é¸£version</h3><blockquote><p>(æ­¤é¾™é¸£éå½¼é¾™é¸£ï¼Œæ„ä¸ºæŠŠä¸Šé¢çš„é¾™é¸£ğŸ´æ•´åˆèµ·æ¥):</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> MAXN 100005</span><br>ll n, m, A[MAXN], tree[MAXN * <span class="hljs-number">4</span>], mark[MAXN * <span class="hljs-number">4</span>]; <br><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(ll p, ll len)</span></span>&#123;<br>    mark[p * <span class="hljs-number">2</span>] += mark[p];<br>    mark[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p];<br>    tree[p * <span class="hljs-number">2</span>] += mark[p] * (len - len / <span class="hljs-number">2</span>);<br>    tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] += mark[p] * (len / <span class="hljs-number">2</span>);<br>    mark[p] = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">build</span><span class="hljs-params">(ll l = <span class="hljs-number">1</span>, ll r = n, ll p = <span class="hljs-number">1</span>)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (l == r)<br>        tree[p] = A[l];<br>    <span class="hljs-keyword">else</span>&#123;<br>        ll mid = (l + r) / <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">build</span>(l, mid, p * <span class="hljs-number">2</span>);<br>        <span class="hljs-built_in">build</span>(mid + <span class="hljs-number">1</span>, r, p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>);<br>        tree[p] = tree[p * <span class="hljs-number">2</span>] + tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>];<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(ll l, ll r, ll d, ll p = <span class="hljs-number">1</span>, ll cl = <span class="hljs-number">1</span>, ll cr = n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl &gt; r || cr &lt; l)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cl &gt;= l &amp;&amp; cr &lt;= r)&#123;<br>        tree[p] += (cr - cl + <span class="hljs-number">1</span>) * d;<br>        <span class="hljs-keyword">if</span> (cr &gt; cl)<br>            mark[p] += d;<br>    &#125;<br>    <span class="hljs-keyword">else</span>&#123;<br>        ll mid = (cl + cr) / <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">push_down</span>(p, cr - cl + <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">update</span>(l, r, d, p * <span class="hljs-number">2</span>, cl, mid);<br>        <span class="hljs-built_in">update</span>(l, r, d, p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr);<br>        tree[p] = tree[p * <span class="hljs-number">2</span>] + tree[p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>];<br>    &#125;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(ll l, ll r, ll p = <span class="hljs-number">1</span>, ll cl = <span class="hljs-number">1</span>, ll cr = n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl &gt; r || cr &lt; l)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cl &gt;= l &amp;&amp; cr &lt;= r)<br>        <span class="hljs-keyword">return</span> tree[p];<br>    <span class="hljs-keyword">else</span>&#123;<br>        ll mid = (cl + cr) / <span class="hljs-number">2</span>;<br>        <span class="hljs-built_in">push_down</span>(p, cr - cl + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">query</span>(l, r, p * <span class="hljs-number">2</span>, cl, mid) + <span class="hljs-built_in">query</span>(l, r, p * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    n = <span class="hljs-built_in">read</span>();<br>    m = <span class="hljs-built_in">read</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>        A[i] = <span class="hljs-built_in">read</span>();<br>    <span class="hljs-built_in">build</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)&#123;<br>        ll opr = <span class="hljs-built_in">read</span>(), l = <span class="hljs-built_in">read</span>(), r = <span class="hljs-built_in">read</span>();<br>        <span class="hljs-keyword">if</span> (opr == <span class="hljs-number">1</span>)&#123;<br>            ll d = <span class="hljs-built_in">read</span>();<br>            <span class="hljs-built_in">update</span>(l, r, d);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, <span class="hljs-built_in">query</span>(l, r));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è´µæ—version"><a href="#è´µæ—version" class="headerlink" title="è´µæ—version"></a>è´µæ—version</h3><blockquote><p><del>è±ªåå‡çº§plus</del>ï¼Œæœ¬æ¥æƒ³åŠ ä¸ªä¹˜é™¤çš„å‘ç°æ¿å­ä¸å…¼å®¹ï¼ŒğŸ‘´æ˜¯æ‡’ç‹—</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> MAXN = <span class="hljs-number">1e5</span> + <span class="hljs-number">5</span>;<br>ll tree[MAXN &lt;&lt; <span class="hljs-number">2</span>], mark[MAXN &lt;&lt; <span class="hljs-number">2</span>], n, m, A[MAXN];<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push_down</span><span class="hljs-params">(<span class="hljs-keyword">int</span> p, <span class="hljs-keyword">int</span> len)</span></span>&#123;<br>    tree[p &lt;&lt; <span class="hljs-number">1</span>] += mark[p] * (len - len / <span class="hljs-number">2</span>);<br>    mark[p &lt;&lt; <span class="hljs-number">1</span>] += mark[p];<br>    tree[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] += mark[p] * (len / <span class="hljs-number">2</span>);<br>    mark[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>] += mark[p];<br>    mark[p] = <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-keyword">int</span> p = <span class="hljs-number">1</span>, <span class="hljs-keyword">int</span> cl = <span class="hljs-number">1</span>, <span class="hljs-keyword">int</span> cr = n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl == cr) &#123; tree[p] = A[cl]; <span class="hljs-keyword">return</span>; &#125;<br>    <span class="hljs-keyword">int</span> mid = (cl + cr) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(p &lt;&lt; <span class="hljs-number">1</span>, cl, mid);<br>    <span class="hljs-built_in">build</span>(p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr);<br>    tree[p] = tree[p &lt;&lt; <span class="hljs-number">1</span>] + tree[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> p = <span class="hljs-number">1</span>, <span class="hljs-keyword">int</span> cl = <span class="hljs-number">1</span>, <span class="hljs-keyword">int</span> cr = n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl &gt;= l &amp;&amp; cr &lt;= r) <span class="hljs-keyword">return</span> tree[p];<br>    <span class="hljs-built_in">push_down</span>(p, cr - cl + <span class="hljs-number">1</span>);<br>    ll mid = (cl + cr) &gt;&gt; <span class="hljs-number">1</span>, ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (mid &gt;= l) ans += <span class="hljs-built_in">query</span>(l, r, p &lt;&lt; <span class="hljs-number">1</span>, cl, mid);<br>    <span class="hljs-keyword">if</span> (mid &lt; r) ans += <span class="hljs-built_in">query</span>(l, r, p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr);<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;   <br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> d, <span class="hljs-keyword">int</span> p = <span class="hljs-number">1</span>, <span class="hljs-keyword">int</span> cl = <span class="hljs-number">1</span>, <span class="hljs-keyword">int</span> cr = n)</span></span>&#123;<br>    <span class="hljs-keyword">if</span> (cl &gt;= l &amp;&amp; cr &lt;= r) &#123; tree[p] += d * (cr - cl + <span class="hljs-number">1</span>), mark[p] += d; <span class="hljs-keyword">return</span>; &#125;<br>    <span class="hljs-built_in">push_down</span>(p, cr - cl + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">int</span> mid = (cl + cr) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (mid &gt;= l) <span class="hljs-built_in">update</span>(l, r, d, p &lt;&lt; <span class="hljs-number">1</span>, cl, mid);<br>    <span class="hljs-keyword">if</span> (mid &lt; r) <span class="hljs-built_in">update</span>(l, r, d, p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, cr);<br>    tree[p] = tree[p &lt;&lt; <span class="hljs-number">1</span>] + tree[p &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å¸¸è§æ¨¡å‹"><a href="#å¸¸è§æ¨¡å‹" class="headerlink" title="å¸¸è§æ¨¡å‹"></a>å¸¸è§æ¨¡å‹</h2><p>æ­¥éª¤ï¼š</p><ol><li>å°†é—®é¢˜è½¬åŒ–æˆç‚¹ä¿¡æ¯å’Œç›®æ ‡ä¿¡æ¯</li><li>å°†ç›®æ ‡ä¿¡æ¯æ ¹æ®éœ€è¦æ‰©å……æˆåŒºé—´ä¿¡æ¯<ul><li>å¢åŠ ä¿¡æ¯ç¬¦åˆåŒºé—´åŠ æ³•</li><li>å¢åŠ æ ‡è®°æ”¯æŒåŒºé—´æ“ä½œ</li></ul></li><li>ä»£ç ä¸­çš„ä¸»è¦æ¨¡å—ï¼šåŒºé—´åŠ æ³•ï¼Œæ ‡è®°ä¸‹æ¨ï¼Œç‚¹ä¿¡æ¯-&gt;åŒºé—´ä¿¡æ¯ï¼Œå„ç§æ“ä½œ(ä¿®æ”¹ã€æŸ¥è¯¢â€¦)</li></ol><h3 id="å­—ç¬¦ä¸²å“ˆå¸Œ"><a href="#å­—ç¬¦ä¸²å“ˆå¸Œ" class="headerlink" title="å­—ç¬¦ä¸²å“ˆå¸Œ"></a>å­—ç¬¦ä¸²å“ˆå¸Œ</h3><blockquote><p>URAL1989 Subpalindromes  <a href="https://blog.csdn.net/zearot/article/details/38921403">é¢˜è§£</a></p><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²(é•¿åº¦&lt;=100000)ï¼Œæœ‰ä¸¤ä¸ªæ“ä½œã€‚  1ï¼šæ”¹å˜æŸä¸ªå­—ç¬¦ã€‚ 2ï¼šåˆ¤æ–­æŸä¸ªå­ä¸²æ˜¯å¦æ„æˆå›æ–‡ä¸²</p></blockquote><p>åˆ†æï¼š</p><p>ç›´æ¥åˆ¤æ–­ä¼šè¶…æ—¶ï¼Œæ­¤å¤„ç”¨ <strong>çº¿æ®µæ ‘ç»´æŠ¤å­—ç¬¦ä¸²å“ˆå¸Œ</strong></p><p>å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²$a[0],a[1],â€¦,a[n-1] $å®ƒå¯¹åº”çš„å“ˆå¸Œå‡½æ•°ä¸º$a[0]+a[1]*K + a[2]*K^2 +â€¦+a[n-1]*K^{n-1}$</p><p>å†ç»´æŠ¤ä¸€ä¸ªä»å³å¾€å·¦çš„å“ˆå¸Œå€¼ï¼š</p><p>$a[0]*K^{n-1} + a[1]*K^{n-2} +â€¦+a[n-1]$</p><p><strong>è‹¥æ˜¯å›æ–‡ä¸²ï¼Œåˆ™å·¦å³çš„å“ˆå¸Œå€¼ä¼šç›¸ç­‰ã€‚è€Œå·¦å³å“ˆå¸Œå€¼ç›¸ç­‰ï¼Œåˆ™å¾ˆå¤§å¯èƒ½è¿™æ˜¯å›æ–‡ä¸²ã€‚</strong></p><p>è‹¥å‡ºç°è¯¯åˆ¤ï¼Œå¯ä»¥å†ç”¨ä¸€ä¸ªK2ï¼Œè¿›è¡ŒäºŒæ¬¡å“ˆå¸Œåˆ¤æ–­ï¼Œå¯ä»¥å‡å°è¯¯åˆ¤æ¦‚ç‡ã€‚å®ç°ä¸Šï¼Œå“ˆå¸Œå€¼æœ€å¥½å¯¹æŸä¸ªè´¨æ•°å–ä½™æ•°ï¼Œè¿™æ ·åˆ†å¸ƒæ›´å‡åŒ€ã€‚</p><p>è§£é¢˜æ¨¡å‹ï¼š</p><ul><li>ç›®æ ‡ä¿¡æ¯ï¼šæŸä¸ªåŒºé—´çš„å·¦ï¼Œå³å“ˆå¸Œå€¼</li><li>ç‚¹ä¿¡æ¯ï¼šä¸€ä¸ªå­—ç¬¦</li></ul><p>ç›®æ ‡ä¿¡æ¯å·²ç»ç¬¦åˆåŒºé—´åŠ æ³•ï¼Œæ‰€ä»¥<strong>åŒºé—´ä¿¡æ¯=ç›®æ ‡ä¿¡æ¯</strong></p><p>æ•…çº¿æ®µæ ‘ç»“æ„ï¼š</p><ul><li><p><strong>åŒºé—´ä¿¡æ¯</strong>ï¼šåŒºé—´å“ˆå¸Œå€¼</p></li><li><p><strong>ç‚¹ä¿¡æ¯</strong>ï¼šä¸€ä¸ªå­—ç¬¦</p></li></ul><p>æ ¸å¿ƒï¼šå°±æ˜¯æ‰¾åˆ°<strong>åŒºé—´ä¿¡æ¯</strong>ï¼Œ å†™å¥½<strong>åŒºé—´åŠ æ³•</strong></p><h3 id="æœ€é•¿è¿ç»­é›¶"><a href="#æœ€é•¿è¿ç»­é›¶" class="headerlink" title="æœ€é•¿è¿ç»­é›¶"></a>æœ€é•¿è¿ç»­é›¶</h3><blockquote><p>Codeforces 527C Glass Carving <a href="https://blog.csdn.net/zearot/article/details/44759437">é¢˜è§£</a></p><p>ç»™å®šä¸€ä¸ªçŸ©å½¢ï¼Œä¸åœåœ°çºµå‘/æ¨ªå‘åˆ‡å‰²ï¼Œé—®æ¯æ¬¡åˆ‡å‰²åï¼Œæœ€å¤§çš„çŸ©å½¢é¢ç§¯æ˜¯å¤šå°‘</p></blockquote><p>åˆ†æï¼š</p><p>æœ€å¤§çŸ©å½¢é¢ç§¯=æœ€é•¿çš„é•¿*æœ€å®½çš„å®½</p><p>é•¿å®½èŒƒå›´å‡ä¸º1e5ï¼Œæ•…ç”¨01åºåˆ—è¡¨ç¤ºæ¯ä¸ªç‚¹æ˜¯å¦è¢«åˆ‡å‰²</p><p>æœ€é•¿çš„é•¿å°±æ˜¯é•¿çš„æœ€é•¿è¿ç»­0çš„æ•°é‡+1ï¼Œå®½åŒç†ï¼Œäºæ˜¯å¯ç”¨ç”¨çº¿æ®µæ ‘ç»´æŠ¤æœ€é•¿è¿ç»­é›¶</p><p>è§£é¢˜æ¨¡å‹ï¼š</p><ul><li>ç›®æ ‡ä¿¡æ¯ï¼šåŒºé—´æœ€é•¿è¿ç»­é›¶çš„ä¸ªæ•°</li><li>ç‚¹ä¿¡æ¯ï¼š0æˆ–1</li></ul><p>ç”±äºç›®æ ‡ä¿¡æ¯ä¸ç¬¦åˆåŒºé—´åŠ æ³•ï¼Œæ‰€ä»¥è¦æ‰©å……ç›®æ ‡ä¿¡æ¯</p><p>æ•…çº¿æ®µæ ‘ç»“æ„ï¼š</p><ul><li><strong>åŒºé—´ä¿¡æ¯</strong>ï¼šä»å·¦ï¼Œå³å¼€å§‹çš„æœ€é•¿è¿ç»­é›¶ï¼Œæœ¬åŒºé—´æ˜¯å¦å…¨é›¶ï¼Œæœ¬åŒºé—´æœ€é•¿è¿ç»­é›¶</li><li><strong>ç‚¹ä¿¡æ¯</strong>ï¼š0æˆ–1</li></ul><h3 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h3><blockquote><p>Codeforces 558E A Simple Task <a href="https://blog.csdn.net/zearot/article/details/48048559">é¢˜è§£</a></p><p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸è¶…è¿‡1e5çš„å­—ç¬¦ä¸²ï¼ˆå°å†™è‹±æ–‡å­—æ¯ï¼‰ï¼Œå’Œä¸è¶…è¿‡5000ä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œ L R K è¡¨ç¤ºç»™åŒºé—´[L,R]çš„å­—ç¬¦ä¸²æ’åºï¼ŒK=1ä¸ºå‡åºï¼ŒK=0ä¸ºé™åºã€‚ æœ€åè¾“å‡ºæœ€ç»ˆçš„å­—ç¬¦ä¸²</p></blockquote><p>è§£é¢˜æ¨¡å‹ï¼š</p><ul><li>ç›®æ ‡ä¿¡æ¯ï¼šåŒºé—´çš„è®¡æ•°æ’åºç»“æœ</li><li>ç‚¹ä¿¡æ¯ï¼šä¸€ä¸ªå­—ç¬¦</li></ul><p>ç›®æ ‡ä¿¡æ¯æ˜¯ç¬¦åˆåŒºé—´åŠ æ³•çš„ï¼Œä½†æ˜¯ä¸ºäº†æ”¯æŒåŒºé—´æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦æ‰©å……ä¿¡æ¯</p><p>æ•…çº¿æ®µæ ‘ç»“æ„ï¼š</p><ul><li><strong>ç›®æ ‡ä¿¡æ¯</strong>ï¼šåŒºé—´çš„è®¡æ•°æ’åºç»“æœï¼Œæ’åºæ ‡è®°ï¼Œæ’åºç§ç±»ï¼ˆå‡é™ï¼‰</li><li><strong>ç‚¹ä¿¡æ¯</strong>ï¼šä¸€ä¸ªå­—ç¬¦</li></ul><h2 id="æ‰«æçº¿"><a href="#æ‰«æçº¿" class="headerlink" title="æ‰«æçº¿"></a>æ‰«æçº¿</h2><p>ğŸ‘´å‰é¢éƒ½æ²¡æ•´å¤ªæ˜ç™½ï¼Œè¿™ä¸ªå¾…ç»­</p>]]></content>
    
    
    <categories>
      
      <category>ALGORITHMS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
      <tag>note</tag>
      
      <tag>ACM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åšå¼ˆè®º</title>
    <link href="/2021/07/31/%E5%8D%9A%E5%BC%88%E8%AE%BA/"/>
    <url>/2021/07/31/%E5%8D%9A%E5%BC%88%E8%AE%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="åšå¼ˆè®º"><a href="#åšå¼ˆè®º" class="headerlink" title="åšå¼ˆè®º"></a>åšå¼ˆè®º</h1><p>Game Theory</p><hr><h2 id="Nimæ¸¸æˆ"><a href="#Nimæ¸¸æˆ" class="headerlink" title="Nimæ¸¸æˆ"></a>Nimæ¸¸æˆ</h2><p>å±äº ICG (Impartial Combinatorial Games) çš„ä¸€ç§ï¼Œæ»¡è¶³æ¡ä»¶å¦‚ä¸‹ï¼š</p><ul><li>ä¸¤åé€‰æ‰‹äº¤æ›¿ç§»åŠ¨ï¼Œåœ¨æœ‰é™çš„åˆæ³•ç§»åŠ¨é›†åˆä¸­ä»»é€‰ä¸€ç§è¿›è¡Œç§»åŠ¨</li><li>å¯¹äºä»»ä½•ä¸€ç§å±€é¢ï¼Œåˆæ³•çš„ç§»åŠ¨é›†åˆåªå–å†³äºå±€é¢æœ¬èº«</li><li>åˆ°è°æ— æ³•ç§»åŠ¨è°å°±è¾“äº†</li></ul><p>ä»¥ä¸‹ç»™å‡º P/N çš„å®šä¹‰ï¼š</p><ul><li>P-Positionï¼šå…ˆæ‰‹å¿…è´¥ç‚¹ (Previous)</li><li>N-Positionï¼šå…ˆæ‰‹å¿…èƒœç‚¹ (Next)</li><li>å¯çŸ¥æ‰€æœ‰ç»ˆç»“ç‚¹éƒ½æ˜¯Pç‚¹ï¼Œä¸€æ­¥å°±<strong>èƒ½</strong>åˆ°Pç‚¹çš„ä¸€å®šæ˜¯Nç‚¹ï¼Œé€šè¿‡ä¸€æ­¥<strong>åªèƒ½</strong>åˆ°Nç‚¹çš„ä¸€å®šæ˜¯Pç‚¹</li></ul><p>ä¸‹é¢æ¥è¯´è¯´Nimæ¸¸æˆï¼šâ€œæœ‰è‹¥å¹²å †çŸ³å­ï¼Œæ¯å †çŸ³å­çš„æ•°é‡æœ‰é™ï¼Œåˆæ³•çš„ç§»åŠ¨æ˜¯â€œé€‰æ‹©ä¸€å †çŸ³å­å¹¶æ‹¿èµ°è‹¥å¹²é¢—ï¼ˆä¸èƒ½ä¸æ‹¿ï¼‰â€ï¼Œå¦‚æœè½®åˆ°æŸä¸ªäººæ—¶æ‰€æœ‰çš„çŸ³å­å †éƒ½å·²ç»è¢«æ‹¿ç©ºäº†ï¼Œåˆ™åˆ¤è´Ÿï¼ˆå› ä¸ºæ²¡æœ‰ä»»ä½•åˆæ³•çš„ç§»åŠ¨ï¼‰â€œï¼Œç®€å•æ¥æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä¸€ä¸ªé€’å½’çš„ç®—æ³•ï¼šå¯¹äºå½“å‰çš„å±€é¢ï¼Œé€’å½’è®¡ç®—å®ƒçš„æ‰€æœ‰å­å±€é¢çš„æ€§è´¨ï¼Œå¦‚æœå­˜åœ¨æŸä¸ªå­å±€é¢æ˜¯Pï¼Œé‚£ä¹ˆå‘è¿™ä¸ªå­å±€é¢çš„ç§»åŠ¨å°±æ˜¯å¿…èƒœç­–ç•¥ã€‚è¿™å…¶ä¸­æœ‰å¤§é‡çš„é‡å å­é—®é¢˜ï¼Œæ‰€ä»¥å¯ä»¥ç”¨DPæˆ–è€…è®°å¿†åŒ–æœç´¢çš„æ–¹æ³•ä»¥æé«˜æ•ˆç‡ã€‚</p><p>ä½†æ˜¯ğŸ‘´ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªnbçš„ç»“è®ºï¼š</p><p><strong>å¯¹äºä¸€ä¸ªNimæ¸¸æˆçš„å±€é¢(a1,a2,â€¦,an)ï¼Œå®ƒæ˜¯P-positionå½“ä¸”ä»…å½“a1^a2^â€¦^an=0ï¼Œå…¶ä¸­^è¡¨ç¤ºå¼‚æˆ–(xor)è¿ç®—</strong></p><p>æ ¹æ®è¿™ä¸ªå®šç†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨O(n)çš„æ—¶é—´å†…åˆ¤æ–­ä¸€ä¸ªNimçš„å±€é¢çš„æ€§è´¨ï¼Œä¸”å¦‚æœå®ƒæ˜¯N-positionï¼Œä¹Ÿå¯ä»¥åœ¨O(n)çš„æ—¶é—´å†…æ‰¾åˆ°æ‰€æœ‰çš„å¿…èƒœç­–ç•¥ã€‚Nimé—®é¢˜å°±è¿™æ ·åŸºæœ¬ä¸Šå®Œç¾çš„è§£å†³äº†ã€‚</p><hr><h2 id="Sprague-Grundyå‡½æ•°"><a href="#Sprague-Grundyå‡½æ•°" class="headerlink" title="Sprague-Grundyå‡½æ•°"></a>Sprague-Grundyå‡½æ•°</h2><p>ICGçš„æŠ½è±¡æ¨¡å‹ï¼šç»™å®šä¸€ä¸ªæœ‰å‘æ— ç¯å›¾å’Œä¸€ä¸ªèµ·å§‹é¡¶ç‚¹ä¸Šçš„ä¸€æšæ£‹å­ï¼Œä¸¤åé€‰æ‰‹äº¤æ›¿çš„å°†è¿™æšæ£‹å­æ²¿æœ‰å‘è¾¹è¿›è¡Œç§»åŠ¨ï¼Œæ— æ³•ç§»åŠ¨è€…åˆ¤è´Ÿ</p><p>é¦–å…ˆå®šä¹‰mex(minimal excludnt) è¿ç®—ï¼š</p><p>æ–½åŠ äºé›†åˆï¼Œè¡¨ç¤º<strong>æœ€å°</strong>çš„<strong>ä¸å±äº</strong>è¿™ä¸ªé›†åˆçš„<strong>éè´Ÿæ•´æ•°</strong>ï¼Œexp: mex{0,1,2,4}=3ã€mex{2,3,5}=0ã€mex{}=0ã€‚</p><p>ä¸‹é¢ç»™å‡ºSGå‡½æ•°çš„å®šä¹‰ï¼š</p><p>å¯¹äºä¸€ä¸ªç»™å®šçš„<strong>æœ‰å‘æ— ç¯å›¾</strong>ï¼Œå®šä¹‰å…³äºå›¾çš„æ¯ä¸ªé¡¶ç‚¹çš„Sprague-Garundyå‡½æ•°å¦‚ä¸‹ï¼šsg(x)=mex{ sg(y) | yæ˜¯xçš„<strong>åç»§</strong> }ã€‚</p><p>ç»“è®ºï¼šå½“SG[x] = 0æ—¶ï¼Œxä¸ºå¿…è´¥çŠ¶æ€ï¼›å½“SG[x] &gt; 0æ—¶ï¼Œxä¸ºå¿…èƒœçŠ¶æ€</p><p>æ‰€ä»¥ä»1~nçš„SGå‡½æ•°å€¼åº”è¯¥å¦‚ä½•è®¡ç®—å‘¢ï¼Ÿ</p><ol><li>ä½¿ç”¨ æ•°ç»„ f[ ] å°†å¯æ”¹å˜å½“å‰çŠ¶æ€ çš„æ–¹å¼è®°å½•ä¸‹æ¥</li><li>ç„¶åæˆ‘ä»¬ä½¿ç”¨ å¦ä¸€ä¸ªæ•°ç»„ S[ ] å°†å½“å‰çŠ¶æ€x çš„åç»§çŠ¶æ€æ ‡è®°</li><li>æ¨¡æ‹Ÿmexè¿ç®—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨æ ‡è®°å€¼ä¸­ æœç´¢ <strong>æœªè¢«æ ‡è®°å€¼</strong> çš„æœ€å°å€¼ï¼Œå°†å…¶èµ‹å€¼ç»™SG(x)</li><li>ä¸æ–­é‡å¤ 2-3 çš„æ­¥éª¤ï¼Œå³å®Œæˆè®¡ç®— 1-n çš„SGå‡½æ•°å€¼</li></ol><p><strong>SGå®šç†</strong>ï¼š<strong>SG(G)=SG(G1)^SG(G2)^â€¦^SG(Gn)<strong>ï¼ŒåŸæ¸¸æˆçš„SGå‡½æ•°å€¼æ˜¯å®ƒçš„æ‰€æœ‰å­æ¸¸æˆçš„SGå‡½æ•°å€¼çš„</strong>å¼‚æˆ–</strong></p><hr><h2 id="è§£é¢˜æ¨¡å‹"><a href="#è§£é¢˜æ¨¡å‹" class="headerlink" title="è§£é¢˜æ¨¡å‹"></a>è§£é¢˜æ¨¡å‹</h2><ol><li><p>æŠŠåŸæ¸¸æˆåˆ†è§£æˆå¤šä¸ªç‹¬ç«‹çš„å­æ¸¸æˆï¼Œåˆ™åŸæ¸¸æˆçš„SGå‡½æ•°å€¼å°±å˜ä¸º<strong>SG(G)=SG(G1)^SG(G2)^â€¦^Sg(Gn)</strong></p></li><li><p>åˆ†åˆ«è€ƒè™‘æ¯ä¸€ä¸ªå­æ¸¸æˆï¼Œè®¡ç®—å…¶SGå€¼</p><p><strong>SGå€¼çš„è®¡ç®—æ–¹æ³•</strong>ï¼ˆimportantï¼‰ï¼š</p><p>â€‹    a. <strong>å¯é€‰æ­¥æ•°ä¸º1~mçš„è¿ç»­æ•´æ•°ï¼Œç›´æ¥å–æ¨¡å³å¯ï¼ŒSG(x) = x % (m+1)</strong> <strong>ï¼ˆBash gameï¼‰</strong></p><p>â€‹    b. <strong>å¯é€‰æ­¥æ•°ä¸ºä»»æ„æ­¥ï¼ŒSG(x) = xï¼ˆNim gameï¼‰</strong></p><p>â€‹    c. <strong>å¯é€‰æ­¥æ•°ä¸ºä¸€ç³»åˆ—ä¸è¿ç»­çš„æ•°ï¼Œç”¨æ¨¡æ¿è®¡ç®—</strong></p></li></ol><h2 id="æ¿å­"><a href="#æ¿å­" class="headerlink" title="æ¿å­"></a>æ¿å­</h2><blockquote><p>é¦–é€‰æ‰“è¡¨é¢„å¤„ç†ï¼Œæ‰“è¡¨æ²¡æ³•ä½¿çš„æ—¶å€™å°±æ€¼dfs</p></blockquote><h3 id="â˜†æ‰“è¡¨"><a href="#â˜†æ‰“è¡¨" class="headerlink" title="â˜†æ‰“è¡¨"></a>â˜†æ‰“è¡¨</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//æ‰“è¡¨</span><br><span class="hljs-keyword">int</span> f[N],SG[MAXN],S[MAXN]; <span class="hljs-comment">// f[] å¯æ”¹å˜å½“å‰çŠ¶æ€çš„æ–¹å¼(å¯å–èµ°çŸ³å­ä¸ªæ•°)   S[] å½“å‰çŠ¶æ€çš„åç»§çŠ¶æ€é›†åˆ</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">getSG</span><span class="hljs-params">(<span class="hljs-keyword">int</span> n)</span> </span>&#123;<br><span class="hljs-keyword">int</span> i,j;<br><span class="hljs-built_in">memset</span>(SG,<span class="hljs-number">0</span>,<span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(SG));<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;=n;i++) &#123; <br><span class="hljs-built_in">memset</span>(S,<span class="hljs-number">0</span>,<span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(S));<br><span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>; f[j]&lt;=i &amp;&amp; j&lt;=N;j++)<br>S[SG[i-f[j]]]=<span class="hljs-number">1</span>; <span class="hljs-comment">//S[]æ•°ç»„æ¥ä¿å­˜å½“å‰çŠ¶æ€çš„åç»§çŠ¶æ€é›†åˆ</span><br><span class="hljs-keyword">for</span>(j=<span class="hljs-number">0</span>;j&lt;=n;j++)&#123; <br>        <span class="hljs-keyword">if</span>(!S[j])&#123;<span class="hljs-comment">//æ¨¡æ‹Ÿmexè¿ç®—</span><br>SG[i]=j;<br><span class="hljs-keyword">break</span>;<br>            &#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ·±æœ"><a href="#æ·±æœ" class="headerlink" title="æ·±æœ"></a>æ·±æœ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//æ³¨æ„ fæ•°ç»„è¦æŒ‰ä»å°åˆ°å¤§æ’åº SGå‡½æ•°è¦åˆå§‹åŒ–ä¸º-1 å¯¹äºæ¯ä¸ªé›†åˆåªéœ€åˆå§‹åŒ–1é</span><br><span class="hljs-comment">//næ˜¯é›†åˆfçš„å¤§å° f[i]æ˜¯å®šä¹‰çš„ç‰¹æ®Šå–æ³•è§„åˆ™çš„æ•°ç»„</span><br><span class="hljs-keyword">int</span> f[<span class="hljs-number">110</span>],SG[<span class="hljs-number">10010</span>],n;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">SG_dfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span></span>&#123;<br>    <span class="hljs-keyword">int</span> i;<br>    <span class="hljs-keyword">if</span>(SG[x]!=<span class="hljs-number">-1</span>)<br>        <span class="hljs-keyword">return</span> SG[x];<br>    <span class="hljs-keyword">bool</span> vis[<span class="hljs-number">110</span>];<br>    <span class="hljs-built_in">memset</span>(vis,<span class="hljs-number">0</span>,<span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(vis));<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;n;i++)&#123;<br>        <span class="hljs-keyword">if</span>(x&gt;=f[i])&#123;<br>            <span class="hljs-built_in">SG_dfs</span>(x-f[i]);<br>            vis[SG[x-f[i]]]=<span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">int</span> e;<br>    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;;i++)<br>        <span class="hljs-keyword">if</span>(!vis[i])&#123;<br>            e=i;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    <span class="hljs-keyword">return</span> SG[x]=e;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="å¸¸è§åšå¼ˆ"><a href="#å¸¸è§åšå¼ˆ" class="headerlink" title="å¸¸è§åšå¼ˆ"></a>å¸¸è§åšå¼ˆ</h2><h3 id="Bash-Game"><a href="#Bash-Game" class="headerlink" title="Bash Game"></a>Bash Game</h3><p>åªæœ‰ä¸€å †nä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµå–ç‰©ï¼Œæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œæœ€å¤šå–mä¸ªã€‚æœ€åå–å…‰è€…å¾—èƒœï¼ˆè°æ‹¿äº†æœ€åä¸€ä¸ªè°èµ¢ï¼‰</p><p>ç»“è®ºï¼šæœ€ä¼˜é€‰æ‹©ä¸ºä¿æŒç»™å¯¹æ‰‹ç•™ä¸‹ <strong>m+1</strong> çš„å€æ•°</p><ul><li><p>if(n%(m+1) != 0)  åˆ™å…ˆæ‰‹å¿…èµ¢ </p></li><li><p>if(n%(m+1) == 0)  åˆ™åæ‰‹å¿…èµ¢</p></li></ul><h3 id="Wythoff-Game"><a href="#Wythoff-Game" class="headerlink" title="Wythoff Game"></a>Wythoff Game</h3><blockquote><p>å„ä½ğŸ‘´å±å®ğŸ®ï¼Œé»„é‡‘åˆ†å‰²æ•°ï¼ˆ1+âˆš5ï¼‰/2 = 1.618 éƒ½ç»™æ•´ä¸Šäº†</p></blockquote><p>æœ‰ä¸¤å †å„è‹¥å¹²ä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµä»æŸä¸€å †å–ç‰©æˆ–åŒæ—¶ä»ä¸¤å †ä¸­å–åŒæ ·å¤šçš„ç‰©å“ï¼Œè§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œå¤šè€…ä¸é™ï¼Œæœ€åå–å…‰è€…å¾—èƒœ</p><p>è¿™é‡Œç”¨ï¼ˆakï¼Œbkï¼‰ï¼ˆak â‰¤ bk ,k=0ï¼Œ1ï¼Œ2ï¼Œâ€¦,n)è¡¨ç¤ºä¸¤å †ç‰©å“çš„æ•°é‡å¹¶ç§°å…¶ä¸º<strong>å±€åŠ¿</strong></p><p>ç”±akï¼Œbkç»„æˆçš„çŸ©å½¢è¿‘ä¼¼ä¸ºé»„é‡‘çŸ©å½¢</p><p>ç»“è®ºï¼š</p><ul><li><p>(int)((bk-ak)*(1+sqrt(5.0))/2) != ak ,  å…ˆæ‰‹å¿…èµ¢</p></li><li><p>(int)((bk-ak)*(1+sqrt(5.0))/2) == ak , åæ‰‹å¿…èµ¢</p></li></ul><h3 id="Nim-Game"><a href="#Nim-Game" class="headerlink" title="Nim Game"></a>Nim Game</h3><p>è‹¥å¹²å †çŸ³å­ï¼Œæ¯å †çŸ³å­çš„æ•°é‡æœ‰é™ï¼Œä¸¤ä¸ªäººå¯ä»¥é€‰æ‹©ä¸€å †çŸ³å­å¹¶æ‹¿èµ°è‹¥å¹²é¢—</p><p>ç»“è®ºï¼šxor ç•¥</p><h3 id="Fibonacci-Nim"><a href="#Fibonacci-Nim" class="headerlink" title="Fibonacci Nim"></a>Fibonacci Nim</h3><p>æœ‰ä¸€å †ä¸ªæ•°ä¸ºnçš„çŸ³å­ï¼Œæ¸¸æˆåŒæ–¹è½®æµå–çŸ³å­ï¼Œæ»¡è¶³: (1)å…ˆæ‰‹ä¸èƒ½åœ¨ç¬¬ä¸€æ¬¡æŠŠæ‰€æœ‰çš„çŸ³å­å–å®Œ (2)æ¯æ¬¡å¯ä»¥å–çš„çŸ³å­æ•°ä»‹äº1åˆ°å¯¹æ‰‹åˆšå–çš„çŸ³å­æ•°çš„2å€ä¹‹é—´(åŒ…å«)  (3) å–èµ°æœ€åä¸€ä¸ªçŸ³å­çš„äººä¸ºèµ¢å®¶</p><p>ç»“è®ºï¼š<strong>å½“nä¸ºFibonacciæ•°çš„æ—¶å€™ï¼Œå¿…è´¥</strong></p><p>f[i]ï¼š1,2,3,5,8,13,21,34,55,89â€¦â€¦</p>]]></content>
    
    
    <categories>
      
      <category>ALGORITHMS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Algorithm</tag>
      
      <tag>note</tag>
      
      <tag>ACM</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>sqlå­¦ä¹ ç¬”è®°</title>
    <link href="/2021/07/29/sql/"/>
    <url>/2021/07/29/sql/</url>
    
    <content type="html"><![CDATA[<h1 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h1><p>ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€-Structured Query Language</p><p><em><strong>@authorï¼šMaskros</strong></em></p><hr><h2 id="Type"><a href="#Type" class="headerlink" title="Type"></a>Type</h2><p>ç±»å‹</p><ul><li>å­—ç¬¦å‹<ul><li>VARCHARå‹å’ŒCHARå‹</li></ul></li><li>æ–‡æœ¬å‹<ul><li>TEXT</li></ul></li><li>æ•°å€¼å‹<ul><li>æ•´æ•°INT ã€å°æ•°NUMERICã€é’±æ•°MONEY)</li></ul></li><li>é€»è¾‘å‹<ul><li>BIT</li></ul></li><li>æ—¥æœŸå‹<ul><li>DATETIME </li></ul></li></ul><hr><h2 id="Operation"><a href="#Operation" class="headerlink" title="Operation"></a>Operation</h2><p>æ“ä½œ</p><p>å¢åˆ æ”¹æŸ¥ CURD</p><p>tips : ä¸åŒºåˆ†å¤§å°å†™ï¼Œåˆ—åè¡¨åå‰``å¯ä»¥çœç•¥</p><h3 id="SELECT-FROM"><a href="#SELECT-FROM" class="headerlink" title="SELECT(FROM)"></a>SELECT(FROM)</h3><ul><li>SELECT COLUMN æŸ¥è¯¢å•ä¸ªåˆ—</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name`<br><span class="hljs-keyword">FROM</span> `table_name`;<br></code></pre></td></tr></table></figure><ul><li>SELECT COLUMN, COLUMN æŸ¥è¯¢å¤šä¸ªåˆ—</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name_1`, `column_name_2`  <br><span class="hljs-keyword">FROM</span> `table_name`;<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ SELECT * æŸ¥è¯¢æ‰€æœ‰åˆ—</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> `table_name`;<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ SELECT DISTINCT æŸ¥è¯¢ä¸åŒè¡Œ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> `column_name`<br><span class="hljs-keyword">FROM</span> `table_name`<br></code></pre></td></tr></table></figure><p>â€‹    å¸Œæœ›æŸ¥è¯¢çš„å€¼éƒ½æ˜¯å”¯ä¸€ä¸é‡å¤çš„</p><ul><li>SELECT WHERE å¯¹è¡Œè¿›è¡Œç­›é€‰è¿‡æ»¤</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name1`,`column_name2`â€¦<br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` operator `<span class="hljs-keyword">value</span>`;<br></code></pre></td></tr></table></figure><h3 id="INSERT-INTO"><a href="#INSERT-INTO" class="headerlink" title="INSERT(INTO)"></a>INSERT(INTO)</h3><ul><li>INSERT INTO åœ¨ä¸æŒ‡å®šåˆ—çš„æƒ…å†µä¸‹æ’å…¥æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `table_name`<br><span class="hljs-keyword">VALUES</span> (value1, value2, value3,...);<br># <span class="hljs-string">&#x27;value&#x27;</span><br></code></pre></td></tr></table></figure><ul><li>INSERT INTO åœ¨æŒ‡å®šçš„åˆ—ä¸­æ’å…¥æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `table_name`<br>(`column1`, `column2`, `column3`,...)<br><span class="hljs-keyword">VALUES</span> (value1, value2, value3,...);<br></code></pre></td></tr></table></figure><h3 id="UPDATE-SET"><a href="#UPDATE-SET" class="headerlink" title="UPDATE(SET)"></a>UPDATE(SET)</h3><ul><li>UPDATE æ›´æ–°æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">UPDATE `table_name`<br><span class="hljs-keyword">SET</span> `column1`<span class="hljs-operator">=</span>value1,`column2`<span class="hljs-operator">=</span>value2,...<br><span class="hljs-keyword">WHERE</span> `some_column`<span class="hljs-operator">=</span>some_value;<br># <span class="hljs-keyword">WHERE</span> å¯ä»¥çœç•¥<br></code></pre></td></tr></table></figure><h3 id="DELETE-FROM"><a href="#DELETE-FROM" class="headerlink" title="DELETE(FROM)"></a>DELETE(FROM)</h3><ul><li>DELETE åˆ é™¤æ•°æ®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `some_column` <span class="hljs-operator">=</span> `some_value`;<br></code></pre></td></tr></table></figure><ul><li>TRUNCATE TABLE æ¸…ç©ºè¡¨</li></ul><hr><h2 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h2><p>æ¡ä»¶</p><h3 id="æ¯”è¾ƒè¿ç®—ç¬¦"><a href="#æ¯”è¾ƒè¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒè¿ç®—ç¬¦"></a>æ¯”è¾ƒè¿ç®—ç¬¦</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">WHERE</span> A OPERATOR B<br></code></pre></td></tr></table></figure><ul><li>tips:  <code>&lt;&gt;</code> , <code>!=</code> å‡ä¸ºä¸ç­‰äºï¼Œä½†ç”¨æ³•ä¸åŒ</li></ul><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a>é€»è¾‘è¿ç®—ç¬¦</h3><ul><li><p>AND è¿æ¥å¤šæ¡ä»¶</p></li><li><p>OR è¿æ¥å¤šæ¡ä»¶</p></li><li><p>NOT è¿‡æ»¤ä¸æ»¡è¶³æ¡ä»¶çš„æ•°æ®</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name` <br><span class="hljs-keyword">FROM</span> `table_name` <br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> `<span class="hljs-keyword">condition</span>`;<br># (condition1 operator condition2)<br></code></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šæ¡ä»¶"><a href="#ç‰¹æ®Šæ¡ä»¶" class="headerlink" title="ç‰¹æ®Šæ¡ä»¶"></a>ç‰¹æ®Šæ¡ä»¶</h3><ul><li>IN æŸ¥è¯¢å¤šæ¡ä»¶</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">Where</span> `column_name1` <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">condition</span>)<br># <span class="hljs-keyword">condition</span> ä¸­ä¹Ÿå¯ä»¥å†™<br><span class="hljs-keyword">IN</span> (<span class="hljs-keyword">select</span> `column_name1` xxxxxxxx)<br></code></pre></td></tr></table></figure><ul><li>NOT IN æ’é™¤</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` (<span class="hljs-keyword">NOT</span>) <span class="hljs-keyword">IN</span> `<span class="hljs-keyword">value</span>`;<br># ï¼ˆvalue1, value2ï¼‰<br></code></pre></td></tr></table></figure><ul><li>BETWEEN AND æŸ¥è¯¢ä¸¤å€¼é—´çš„æ•°æ®èŒƒå›´</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` <span class="hljs-keyword">BETWEEN</span> `<span class="hljs-keyword">value</span>` <span class="hljs-keyword">AND</span> `<span class="hljs-keyword">value</span>`;<br></code></pre></td></tr></table></figure><ul><li>IS NULL æŸ¥è¯¢ç©ºæ•°æ®</li><li>ä½¿ç”¨ LIKE æ¨¡ç³ŠæŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` <span class="hljs-keyword">LIKE</span> `<span class="hljs-keyword">value</span>`;<br># <span class="hljs-keyword">LIKE</span> `D<span class="hljs-operator">%</span>`<br># <span class="hljs-string">&#x27;D%&#x27;</span> è¡¨ç¤ºä»¥Då¼€å¤´çš„æ‰€æœ‰å•è¯ï¼Œ<span class="hljs-operator">%</span> è¡¨ç¤ºä¸ºé€šé…ç¬¦ï¼Œå¯ä»¥æ›¿ä»£<span class="hljs-number">0</span><span class="hljs-operator">~</span>nä¸ªå­—ç¬¦<br></code></pre></td></tr></table></figure><h3 id="ORDER-BY-amp-LIMIT"><a href="#ORDER-BY-amp-LIMIT" class="headerlink" title="ORDER BY &amp; LIMIT"></a>ORDER BY &amp; LIMIT</h3><ul><li><p>ORDER BY å¯¹æ•°æ®è¿›è¡Œæ’åºï¼ˆä¸€åˆ—/å¤šåˆ—(å¤šåˆ—æŒ‰SELECTé¡ºåº)ï¼‰</p><p>ASC (ascend)å‡åº(é»˜è®¤)  |  DESC(descend) é™åº</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">SELECT</span> `column_name`, `column_name`<br><span class="hljs-keyword">FROM</span> `table_name`<br># <span class="hljs-keyword">WHERE</span> XXXX<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> `column_name`, `column_name` <span class="hljs-keyword">ASC</span><span class="hljs-operator">|</span><span class="hljs-keyword">DESC</span>; <br></code></pre></td></tr></table></figure><ul><li><p>ä½¿ç”¨ LIMIT é™åˆ¶è¾“å‡ºè¡Œæ•°</p><p>offset ï¼šæ˜¯è¿”å›é›†çš„åˆå§‹æ ‡æ³¨ï¼Œèµ·å§‹ç‚¹æ˜¯0</p><p>count ï¼šåˆ¶å®šè¿”å›çš„æ•°é‡</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name`, `column_name`<br><span class="hljs-keyword">FROM</span> `table_name`<br># <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> XXXX<br>LIMIT `<span class="hljs-keyword">offset</span>` , `count`;<br># <span class="hljs-keyword">offset</span>å’Œcounté€šå¸¸åªç”¨ä¸€ä¸ªcountï¼šLIMIT (<span class="hljs-number">0</span>,)<span class="hljs-number">1</span> <br></code></pre></td></tr></table></figure><h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><p>å‡½æ•°</p><h3 id="ç®—æ•°å‡½æ•°"><a href="#ç®—æ•°å‡½æ•°" class="headerlink" title="ç®—æ•°å‡½æ•°"></a>ç®—æ•°å‡½æ•°</h3><ul><li>AVG() å‡½æ•°æ±‚æ•°å€¼åˆ—çš„å¹³å‡å€¼</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(`column_name`) # <span class="hljs-keyword">AS</span> `column2_name`<br><span class="hljs-keyword">FROM</span> `table_name`;<br></code></pre></td></tr></table></figure><ul><li><p>MAX() å‡½æ•°è¿”å›æŒ‡å®šåˆ—ä¸­çš„æœ€å¤§å€¼</p></li><li><p>MIN() å‡½æ•°è¿”å›æŒ‡å®šåˆ—ä¸­çš„æœ€å°å€¼</p></li><li><p>SUM() å‡½æ•°ç»Ÿè®¡æ•°å€¼åˆ—çš„æ€»æ•°</p></li><li><p>ROUND() å‡½æ•°å°†æ•°å€¼å››èˆäº”å…¥</p><ul><li>ROUND() è¿”å›å€¼æ•°æ®ç±»å‹ä¼šè¢«å˜æ¢ä¸ºä¸€ä¸ªBIGINT ã€‚</li><li>å½“ decimals ä¸ºæ­£æ•°æ—¶ï¼Œcolumn_name å››èˆäº”å…¥ä¸º decimals æ‰€æŒ‡å®šçš„å°æ•°ä½æ•°ã€‚çœç•¥decimalsè‡ªåŠ¨ä¿ç•™å››èˆäº”å…¥åçš„æ•´æ•°ã€‚å½“ decimals ä¸ºè´Ÿæ•°æ—¶ï¼Œcolumn_name åˆ™æŒ‰ decimals æ‰€æŒ‡å®šçš„åœ¨å°æ•°ç‚¹çš„å·¦è¾¹å››èˆäº”å…¥ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> ROUND(`column_name`, `decimals`) <br><span class="hljs-keyword">FROM</span> `table_name`;<br>#decimals è§„å®šè¦è¿”å›çš„å°æ•°ä½æ•°<br></code></pre></td></tr></table></figure></li><li><p>NULL() å‡½æ•°åˆ¤æ–­ç©ºå€¼</p><ul><li><p>ISNULL()</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> ISNULL(`column_name`)<br><span class="hljs-keyword">FROM</span> `table_name`;<br># è¿”å› <span class="hljs-number">0</span> æˆ– <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure></li><li><p>IFNULL()</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> IFNULL(`column_name`, `<span class="hljs-keyword">value</span>`)<br><span class="hljs-keyword">FROM</span> `table_name`;<br># æ˜¯ <span class="hljs-keyword">NULL</span> åˆ™è¿”å› <span class="hljs-keyword">value</span> å€¼ï¼Œä¸æ˜¯åˆ™è¿”å›å¯¹åº”å†…å®¹<br></code></pre></td></tr></table></figure></li></ul></li><li><p>COUNT() å‡½æ•°è®¡æ•°</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-built_in">COUNT</span>(column_name) å¯¹åˆ—å…·æœ‰çš„è¡Œæ•°è¿›è¡Œè®¡æ•° é™¤å»å€¼ä¸º <span class="hljs-keyword">NULL</span> çš„è¡Œ<br># ä¸»è¦ç”¨äºæŸ¥çœ‹å„åˆ—æ•°æ®çš„æ•°é‡æƒ…å†µï¼Œä¾¿äºç»Ÿè®¡æ•°æ®çš„ç¼ºå¤±å€¼<br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(`column_name`) <br><span class="hljs-keyword">FROM</span> `table_name`;<br># <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) å¯¹è¡¨ä¸­è¡Œçš„æ•°ç›®è¿›è¡Œè®¡æ•°,åŒ…æ‹¬ <span class="hljs-keyword">NULL</span> æ‰€åœ¨è¡Œå’Œé‡å¤é¡¹æ‰€åœ¨è¡Œ<br># ä¸»è¦ç”¨äºæŸ¥çœ‹è¡¨ä¸­çš„è®°å½•æ•°<br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <br><span class="hljs-keyword">FROM</span> `table_name`;<br># <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> column_name) å‡½æ•°è¿”å›æŒ‡å®šåˆ—çš„ä¸åŒå€¼çš„æ•°ç›®<br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> `column_name`) <br><span class="hljs-keyword">FROM</span> `table_name`;<br></code></pre></td></tr></table></figure><h3 id="æ—¶é—´å‡½æ•°"><a href="#æ—¶é—´å‡½æ•°" class="headerlink" title="æ—¶é—´å‡½æ•°"></a>æ—¶é—´å‡½æ•°</h3><ul><li><p>NOW()ï¼ŒCURDATE()ã€CURTIME() è·å–å½“å‰æ—¶é—´</p><ul><li><code>NOW()</code> è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´  YYYY-MM-DD hh:mm:ss</li><li><code>CURDATE()</code> è¿”å›å½“å‰æ—¥æœŸ  YYYY-MM-DD</li><li><code>CURTIME()</code> è¿”å›å½“å‰æ—¶é—´  hh:mm:ss</li><li>è¦ç²¾ç¡®çš„ç§’ä»¥åçš„æ—¶é—´çš„è¯ï¼Œå¯ä»¥åœ¨ () ä¸­åŠ æ•°å­—ï¼ŒåŠ å¤šå°‘ï¼Œå°±è¡¨ç¤ºç²¾ç¡®åˆ°ç§’åå¤šå°‘ä½</li></ul></li><li><p>DATE()ã€TIME() å‡½æ•°æå–æ—¥æœŸå’Œæ—¶é—´</p></li><li><p>EXTRACT() å‡½æ•°æå–æŒ‡å®šçš„æ—¶é—´ä¿¡æ¯</p><ul><li><p>FROM</p></li><li><p>è¿”å›æ—¥æœŸ/æ—¶é—´çš„å•ç‹¬éƒ¨åˆ†</p></li><li><p>unit :  <code>YEAR</code> (å¹´)ã€<code>MONTH</code> (æœˆ)ã€<code>DAY</code> (æ—¥)ã€<code>HOUR</code> (å°æ—¶)ã€<code>MINUTE</code> (åˆ†é’Ÿ)ã€ <code>SECOND</code> (ç§’)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">EXTRACT</span>(unit <span class="hljs-keyword">FROM</span> <span class="hljs-type">date</span>) # unit ä¸ºå•ç‹¬éƒ¨åˆ†å<br><span class="hljs-keyword">FROM</span> `<span class="hljs-keyword">table</span>`<br># <span class="hljs-type">date</span> <span class="hljs-operator">-</span> åˆæ³•<span class="hljs-keyword">column</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>DATE_FORMAT() æ ¼å¼åŒ–è¾“å‡ºæ—¥æœŸ</p><ul><li>%Y å¹´ä»½ %m æœˆä»½ %d æ—¥æœŸ %w æ˜ŸæœŸ %H å°æ—¶  %i åˆ†é’Ÿ %s ç§’</li><li>å°å†™y è¡¨ç¤ºå¹´ä»½åä¸¤ä½ï¼Œå°å†™hè¡¨ç¤º12å°æ—¶è®¡çš„å°æ—¶</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATE_FORMAT(<span class="hljs-type">date</span>,<span class="hljs-string">&#x27;format&#x27;</span>);<br></code></pre></td></tr></table></figure></li><li><p>DATE_ADD() å¢åŠ æ—¶é—´</p><ul><li>INTERVAL</li><li>å‘æ—¥æœŸæ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”</li><li> <code>expr</code> æ˜¯å¸Œæœ›æ·»åŠ çš„æ—¶é—´é—´éš”çš„æ•°å€¼</li><li>type :  MICROSECOND , SECOND , MINUTE , HOUR , DAY , WEEK , MONTH , QUARTER , YEAR</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> DATE_ADD(<span class="hljs-type">date</span>, <span class="hljs-type">INTERVAL</span> expr type)<br><span class="hljs-keyword">FROM</span> table_name<br></code></pre></td></tr></table></figure></li><li><p>DATE_SUB() å‡å°‘æ—¶é—´</p></li><li><p>DATEDIFF() å’Œ TIMESTAMPDIFF() è®¡ç®—æ—¥æœŸå·®</p><ul><li>æ—¶é—´1-æ—¶é—´2</li><li>DATEDIFF() é»˜è®¤åªèƒ½è®¡ç®—å¤©æ•°å·®</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">SELECT</span> DATEDIFF(æ—¶é—´<span class="hljs-number">1</span>,æ—¶é—´<span class="hljs-number">2</span>) <span class="hljs-keyword">AS</span> date_diff <span class="hljs-keyword">FROM</span> courses;<br></code></pre></td></tr></table></figure><ul><li>TIMESTAMPDIFF() è®¡ç®—ç›¸å·®å¹´æœˆå‘¨æ—¥æ—¶<ul><li>ç±»å‹YEAR,MONTH,WEEK,DAY,HOUR</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> TIMESTAMPDIFF (ç±»å‹,æ—¶é—´<span class="hljs-number">1</span>,æ—¶é—´<span class="hljs-number">2</span>) <span class="hljs-keyword">AS</span> year_diffï¼›<br></code></pre></td></tr></table></figure></li></ul><hr><h2 id="Constraints"><a href="#Constraints" class="headerlink" title="Constraints"></a>Constraints</h2><p>çº¦æŸ</p><h3 id="NOT-NULL"><a href="#NOT-NULL" class="headerlink" title="NOT NULL"></a>NOT NULL</h3><p>éç©ºçº¦æŸ</p><ul><li>å¼ºåˆ¶åˆ—ä¸æ¥å— NULL å€¼</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs SQL"># å»ºè¡¨<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Persons` (<br>    `ID` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `LastName` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>)<br>);<br># å·²å»ºè¡¨<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br>MODIFY `Age` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>;<br># æ’¤é”€<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br>MODIFY `Age` <span class="hljs-type">int</span> <span class="hljs-keyword">NULL</span>;<br></code></pre></td></tr></table></figure><h3 id="UNIQUE"><a href="#UNIQUE" class="headerlink" title="UNIQUE"></a>UNIQUE</h3><p>å”¯ä¸€çº¦æŸ</p><ul><li>ä¸å¸Œæœ›å‡ºç°é‡å¤è®°å½•</li><li>CONSTRAINT å‘½å</li><li>DROP æ’¤é”€</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sql"># å»ºè¡¨<br>## MySQL<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Persons`(<br>    `P_Id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">UNIQUE</span> (`P_Id`)<br>)<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Persons`(<br>`P_Id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,<br>)<br>## å‘½å<span class="hljs-operator">+</span>å¤šåˆ—<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Persons`(<br>    `P_Id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `LastName` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uc_PersonID <span class="hljs-keyword">UNIQUE</span> (`P_Id`,`LastName`)<br>)<br><br># å·²å»º<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">UNIQUE</span>ï¼ˆ`P_Id`ï¼‰<br>## å¤šåˆ—<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> uc_PersonID <span class="hljs-keyword">UNIQUE</span> (`P_Id`,`LastName`)<br><br># æ’¤é”€<br>## MySQL<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">DROP</span> INDEX uc_PersonID<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> uc_PersonID<br></code></pre></td></tr></table></figure><h3 id="PRIMARY-KEY"><a href="#PRIMARY-KEY" class="headerlink" title="PRIMARY KEY"></a>PRIMARY KEY</h3><p>ä¸»é”®çº¦æŸ</p><ul><li>ç®€å•çš„è¯´ï¼ŒPRIMARY KEY = UNIQUE + NOT NULL </li><li>NOT NULL UNIQUE å¯ä»¥å°†è¡¨çš„ä¸€åˆ—æˆ–å¤šåˆ—å®šä¹‰ä¸ºå”¯ä¸€æ€§å±æ€§ï¼Œè€Œ PRIMARY KEY è®¾ä¸ºå¤šåˆ—æ—¶ï¼Œä»…èƒ½ä¿è¯å¤šåˆ—ä¹‹å’Œæ˜¯å”¯ä¸€çš„ï¼Œå…·ä½“åˆ°æŸä¸€åˆ—å¯èƒ½ä¼šé‡å¤ã€‚</li><li>PRIMARY KEY å¯ä»¥ä¸å¤–é”®é…åˆï¼Œä»è€Œå½¢æˆä¸»ä»è¡¨çš„å…³ç³»</li><li>PRIMARY KEY ä¸€èˆ¬åœ¨é€»è¾‘è®¾è®¡ä¸­ç”¨ä½œè®°å½•æ ‡è¯†ï¼Œè¿™ä¹Ÿæ˜¯è®¾ç½® PRIMARY KEY çš„æœ¬æ¥ç”¨æ„ï¼Œè€Œ UNIQUE åªæ˜¯ä¸ºäº†ä¿è¯åŸŸ/åŸŸç»„çš„å”¯ä¸€æ€§</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sql"># å»ºè¡¨<br>## MySQL<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Persons(<br>    `P_Id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`P_Id`)<br>);<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Persons`(<br>    `P_Id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>)<br>## å‘½å<span class="hljs-operator">+</span>å¤šåˆ—<br><span class="hljs-keyword">CONSTRAINT</span> pk_PersonID <span class="hljs-keyword">PRIMARY</span> KEY (`P_Id`,`LastName`)<br><br># å·²å»º<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY (`P_Id`)<br>## å¤šåˆ—<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> pk_PersonID <span class="hljs-keyword">PRIMARY</span> KEY (`P_Id`,`LastName`)<br><br># æ’¤é”€<br>## MySQL<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PRIMARY</span> KEY<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> pk_PersonID<br></code></pre></td></tr></table></figure><h3 id="FOREIGN-KEY"><a href="#FOREIGN-KEY" class="headerlink" title="FOREIGN KEY"></a>FOREIGN KEY</h3><p>å¤–é”®çº¦æŸ </p><ul><li>ä¸€ä¸ªè¡¨ä¸­çš„ FOREIGN KEY æŒ‡å‘å¦ä¸€ä¸ªè¡¨ä¸­çš„ UNIQUE KEY </li><li>ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§</li><li>åœ¨ä¸¤ä¸ªè¡¨ä¹‹é—´å»ºç«‹å…³ç³»ï¼Œéœ€è¦æŒ‡å®šå¼•ç”¨ä¸»è¡¨çš„å“ªä¸€åˆ—ï¼ŒREFERENCES è¡¨ç¤ºå¼•ç”¨ä¸€ä¸ªè¡¨</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sql"># å»ºè¡¨<br>## MySQL<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Orders`(<br>    `P_Id` <span class="hljs-type">int</span>,<br>    <span class="hljs-keyword">FOREIGN</span> KEY (P_Id) <span class="hljs-keyword">REFERENCES</span> Persons(P_Id)<br>)<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `Orders`(<br>    P_Id <span class="hljs-type">int</span> <span class="hljs-keyword">FOREIGN</span> KEY <span class="hljs-keyword">REFERENCES</span> Persons(P_Id)<br>)<br>## å‘½å<span class="hljs-operator">+</span>å¤šåˆ—<br><span class="hljs-keyword">CONSTRAINT</span> fk_PerOrders <span class="hljs-keyword">FOREIGN</span> KEY (P_Id)<br><span class="hljs-keyword">REFERENCES</span> Persons(P_Id)<br><br># å·²å»º<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Orders`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">FOREIGN</span> KEY (P_Id)<br><span class="hljs-keyword">REFERENCES</span> Persons(P_Id)<br>## å‘½å<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Orders`<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> fk_PerOrders<br><span class="hljs-keyword">FOREIGN</span> KEY (P_Id)<br><span class="hljs-keyword">REFERENCES</span> Persons(P_Id)<br><br># æ’¤é”€<br>## MySQL<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Orders`<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">FOREIGN</span> KEY fk_PerOrders<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Orders`<br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> fk_PerOrders<br></code></pre></td></tr></table></figure><h3 id="CHECK"><a href="#CHECK" class="headerlink" title="CHECK"></a>CHECK</h3><p>æ£€æŸ¥çº¦æŸ </p><ul><li>é™åˆ¶åˆ—ä¸­çš„å€¼çš„èŒƒå›´ï¼Œè¯„ä¼°æ’å…¥æˆ–ä¿®æ”¹åçš„å€¼ã€‚æ»¡è¶³æ¡ä»¶æ’å…¥ï¼Œå¦ä¸æ’</li><li>å¯ä»¥ä¸ºåŒä¸€åˆ—æŒ‡å®šå¤šä¸ª CHECK çº¦æŸ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs sql"># å»ºè¡¨<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `courses`(<br>`student_count` <span class="hljs-type">int</span>, â€¦<br><span class="hljs-keyword">CHECK</span> (Condition1 <span class="hljs-keyword">AND</span> Condition2)<br>)<br>## å‘½å<br><span class="hljs-keyword">CONSTRAINT</span> chk_courses <span class="hljs-keyword">CHECK</span> (`student_count` <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>);<br><br># å·²å»º<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `courses` <br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CHECK</span> ( `student_count` <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>);<br>## <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> XXX <span class="hljs-keyword">CHECK</span> (<span class="hljs-keyword">Condition</span>);<br><br># æ’¤é”€<br>## MySQL<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `courses` <br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CHECK</span> chk_courses<br>## <span class="hljs-keyword">SQL</span> Server <span class="hljs-operator">/</span> Oracle <span class="hljs-operator">/</span> MS Access<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `courses` <br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">CONSTRAINT</span> chk_courses<br></code></pre></td></tr></table></figure><h3 id="DEFAULT"><a href="#DEFAULT" class="headerlink" title="DEFAULT"></a>DEFAULT</h3><p>é»˜è®¤çº¦æŸ</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">`City` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;Sandnes&#x27;</span><br>`OrderDate` <span class="hljs-type">date</span> <span class="hljs-keyword">DEFAULT</span> GETDATE()  # å¯ä»¥ç”¨å‡½æ•°<br><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `Persons`<br><span class="hljs-keyword">ALTER</span> `City` <span class="hljs-keyword">SET</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;SANDNES&#x27;</span><br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> ab_c <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;SANDNES&#x27;</span> <span class="hljs-keyword">for</span> `City`<br><br><span class="hljs-keyword">ALTER</span> `City` <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DEFAULT</span><br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">COLUMN</span> `City` <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">DEFAULT</span><br></code></pre></td></tr></table></figure><h2 id="Join"><a href="#Join" class="headerlink" title="Join"></a>Join</h2><p>å¤šè¡¨è”ç»“</p><h3 id="è”ç»“"><a href="#è”ç»“" class="headerlink" title="è”ç»“"></a>è”ç»“</h3><ul><li><p>åœ¨ä¸€æ¡ SELECT è¯­å¥ä¸­å…³è”å¤šä¸ªè¡¨ï¼Œè¿”å›ä¸€ç»„è¾“å‡º</p></li><li><p>ä¸¤å¤§ä¸»è§’ : ä¸»é”® (PRIMARY KEY) å’Œå¤–é”® (FOREIGN KEY)</p></li><li><p>ä½¿ç”¨å®Œå…¨é™å®šåˆ—åï¼ˆç”¨ä¸€ä¸ªç‚¹åˆ†éš”è¡¨åå’Œåˆ—åï¼‰</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"># <span class="hljs-keyword">condition</span><br>`table1`.`common_field` <span class="hljs-operator">=</span> `table2`.`common_field`<br></code></pre></td></tr></table></figure><ul><li>JOIN è¿æ¥å­å¥<ul><li><strong>INNER JOIN</strong> å†…è¿æ¥ï¼šå¦‚æœè¡¨ä¸­æœ‰è‡³å°‘ä¸€ä¸ªåŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</li><li><strong>OUTER JOIN</strong> å¤–è¿æ¥<ul><li><strong>LEFT JOIN</strong>ï¼šå³ä½¿å³è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å·¦è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ</li><li><strong>RIGHT JOIN</strong>ï¼šå³ä½¿å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œä¹Ÿä»å³è¡¨è¿”å›æ‰€æœ‰çš„è¡Œ</li></ul></li><li><strong>FULL JOIN</strong> å…¨è¿æ¥ï¼šåªè¦å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</li><li><strong>CROSS JOIN</strong> äº¤å‰è¿æ¥ï¼šåˆç§°<strong>ç¬›å¡å°”ç§¯</strong>ï¼Œä¸¤ä¸ªè¡¨æ•°æ®ä¸€ä¸€å¯¹åº”ï¼Œè¿”å›ç»“æœçš„è¡Œæ•°ç­‰äºä¸¤ä¸ªè¡¨è¡Œæ•°çš„ä¹˜ç§¯</li></ul></li></ul><h3 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h3><p>å†…è¿æ¥ åˆç§°ä¸ºEQUIJOIN ç­‰å€¼è¿æ¥</p><ul><li>å†…è¿æ¥å°±æ˜¯å–ä¸¤ä¸ªè¡¨çš„äº¤é›†ï¼Œè¿”å›çš„ç»“æœå°±æ˜¯è¿æ¥çš„ä¸¤å¼ è¡¨ä¸­éƒ½æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `table1`.`column1`, `table2`.`column2`...<br><span class="hljs-keyword">FROM</span> `table1`<br>(<span class="hljs-keyword">INNER</span>) <span class="hljs-keyword">JOIN</span> `table2` # <span class="hljs-keyword">INNER</span> å¯çœç•¥ä¸å†™<br><span class="hljs-keyword">ON</span> `table1`.`common_field` <span class="hljs-operator">=</span> `table2`.`common_field`;<br># <span class="hljs-keyword">ON</span> <span class="hljs-keyword">CONDITION</span><br></code></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"># exp<br><span class="hljs-keyword">SELECT</span> `c`.`id`, `c`.`name` <span class="hljs-keyword">AS</span> `course_name`, `t`.`name` <span class="hljs-keyword">AS</span> `teacher_email`<br><span class="hljs-keyword">FROM</span> `courses` `c`<br>    (<span class="hljs-keyword">INNER</span>) <span class="hljs-keyword">JOIN</span> `teachers` `t` <span class="hljs-keyword">ON</span> `c`.`teacher_id` <span class="hljs-operator">=</span> `t`.`id`;<br></code></pre></td></tr></table></figure><ul><li><code>courses</code> <code>c</code> ç­‰åŒäº <code>courses</code> AS <code>c</code> ï¼Œç»™<code>courses</code> è¡¨å–åˆ«åä¸º <code>c</code></li></ul><h3 id="OUTER-JOIN"><a href="#OUTER-JOIN" class="headerlink" title="OUTER JOIN"></a>OUTER JOIN</h3><p>å¤–è¿æ¥ åˆ†ä¸ºå·¦å¤–è¿æ¥ å³å¤–è¿æ¥ å…¨å¤–è¿æ¥</p><ul><li>å¤–è¿æ¥å¯ä»¥å°†æŸä¸ªè¡¨æ ¼ä¸­ï¼Œåœ¨å¦å¤–ä¸€å¼ è¡¨æ ¼ä¸­æ— å¯¹åº”å…³ç³»ï¼Œä½†æ˜¯ä¹Ÿèƒ½å°†æ•°æ®åŒ¹é…å‡ºæ¥</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> column_name <span class="hljs-number">1</span>,column_name <span class="hljs-number">2</span> ... column_name n<br>    <span class="hljs-keyword">FROM</span> table1<br>        <span class="hljs-keyword">LEFT</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">RIGHT</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">FULL</span>  (<span class="hljs-keyword">OUTER</span>) <span class="hljs-keyword">JOIN</span> table2<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">CONDITION</span>;<br></code></pre></td></tr></table></figure><ul><li>LEFT JOIN : ä»¥å·¦è¡¨ä¸ºå‚è€ƒè¡¨ï¼Œè¿”å›å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼ŒåŠ ä¸Šå³è¡¨ä¸­åŒ¹é…åˆ°çš„è®°å½•</li><li>RIGHT JOIN :  ä»¥å³è¡¨ä¸ºå‚è€ƒè¡¨</li><li>FULL JOIN : åªè¦å·¦è¡¨å’Œå³è¡¨å…¶ä¸­ä¸€ä¸ªè¡¨ä¸­å­˜åœ¨åŒ¹é…ï¼Œåˆ™è¿”å›è¡Œ</li></ul><blockquote><p>tips :  MySQL æ•°æ®åº“ä¸æ”¯æŒå…¨è¿æ¥ï¼Œæƒ³è¦å®ç°å…¨è¿æ¥å¯ä»¥ä½¿ç”¨ UNION ALL æ¥å°†å·¦è¿æ¥å’Œå³è¿æ¥ç»“æœç»„åˆåœ¨ä¸€èµ·å®ç°å…¨è¿æ¥</p></blockquote><ul><li>UNION :  è”åˆï¼ŒæŠŠä¸¤æ¬¡æˆ–å¤šæ¬¡æŸ¥è¯¢ç»“æœåˆå¹¶èµ·æ¥<ul><li>è¦æ±‚ï¼šä¸¤æ¬¡æŸ¥è¯¢çš„åˆ—æ•°å¿…é¡»ä¸€è‡´ï¼ŒåŒæ—¶ï¼Œæ¯æ¡ SELECT è¯­å¥ä¸­çš„åˆ—çš„é¡ºåºå¿…é¡»ç›¸åŒ</li><li>UNION ä¼šå»æ‰é‡å¤çš„è¡Œã€‚ å¦‚æœä¸æƒ³å»æ‰é‡å¤çš„è¡Œï¼Œå¯ä»¥ä½¿ç”¨ UNION ALL </li><li>å¦‚æœå­å¥ä¸­æœ‰ order by , limitï¼Œéœ€ç”¨æ‹¬å·()åŒ…èµ·æ¥ã€‚æ¨èæ”¾åˆ°æ‰€æœ‰å­å¥ä¹‹åï¼Œå³å¯¹æœ€ç»ˆåˆå¹¶çš„ç»“æœæ¥æ’åºæˆ–ç­›é€‰</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> column_name <span class="hljs-number">1</span>,column_name <span class="hljs-number">2</span> ... column_name n<br>    <span class="hljs-keyword">FROM</span> table1<br>        <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> table2 <span class="hljs-keyword">ON</span> <span class="hljs-keyword">CONDITION</span> <br><span class="hljs-keyword">UNION</span><br><span class="hljs-keyword">SELECT</span> column_name <span class="hljs-number">1</span>,column_name <span class="hljs-number">2</span> ... column_name n<br>    <span class="hljs-keyword">FROM</span> table1<br>        <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">JOIN</span> table2 <span class="hljs-keyword">ON</span> <span class="hljs-keyword">CONDITION</span> ;<br></code></pre></td></tr></table></figure><h3 id="CROSS-JOIN"><a href="#CROSS-JOIN" class="headerlink" title="CROSS JOIN"></a>CROSS JOIN</h3><p>äº¤å‰è¿æ¥ ç»“æœä¹Ÿç§°ä½œç¬›å¡å°”ç§¯</p><ul><li>è¿”å›å·¦è¡¨ä¸­çš„æ‰€æœ‰è¡Œï¼Œå·¦è¡¨ä¸­çš„æ¯ä¸€è¡Œä¸å³è¡¨ä¸­çš„æ‰€æœ‰è¡Œç»„åˆã€‚å³å°†ä¸¤ä¸ªè¡¨çš„æ•°æ®ä¸€ä¸€å¯¹åº”ï¼Œå…¶æŸ¥è¯¢ç»“æœçš„è¡Œæ•°ä¸ºå·¦è¡¨ä¸­çš„è¡Œæ•°ä¹˜ä»¥å³è¡¨ä¸­çš„è¡Œæ•°ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"># éšå¼è¿æ¥ ä¸éœ€è¦ä½¿ç”¨ <span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> å…³é”®å­—<br><span class="hljs-keyword">SELECT</span> `table1`.`column1`, `table2`.`column2`...<br><span class="hljs-keyword">FROM</span> `table1`,`table2`;<br># æ˜¾å¼è¿æ¥<br><span class="hljs-keyword">SELECT</span> `table1`.`column1`, `table2`.`column2`...<br><span class="hljs-keyword">FROM</span> `table1`<br><span class="hljs-keyword">CROSS</span> <span class="hljs-keyword">JOIN</span> `table2`;<br></code></pre></td></tr></table></figure><ul><li>é€šè¿‡å¢åŠ è”ç»“æ¡ä»¶ï¼Œä½¿ç”¨ WHERE å­å¥å¸®åŠ©ç­›é€‰è¿‡æ»¤æ— æ•ˆçš„æ•°æ®</li></ul><hr><h2 id="Advanced-Select"><a href="#Advanced-Select" class="headerlink" title="Advanced Select"></a>Advanced Select</h2><h3 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h3><ul><li><p>GROUP BY å­å¥</p><ul><li>å¯¹åŒç±»çš„æ•°æ®è¿›è¡Œåˆ†ç±»</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name`, aggregate_function(`column_name`)<br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` operator <span class="hljs-keyword">value</span><br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> `column_name`;<br></code></pre></td></tr></table></figure></li><li><p>HAVING å­å¥</p><ul><li>ä½¿ç”¨ WHERE æ¡ä»¶å­å¥æ—¶ä¸èƒ½ä¸èšåˆå‡½æ•°è”åˆä½¿ç”¨</li><li> HAVING å­å¥ç»å¸¸ä¸ GROUP BY è”åˆä½¿ç”¨ï¼ŒHAVING å­å¥å°±æ˜¯å¯¹åˆ†ç»„ç»Ÿè®¡å‡½æ•°è¿›è¡Œè¿‡æ»¤çš„å­å¥</li><li>HAVING å­å¥å¯¹äº GROUP BY å­å¥è®¾ç½®æ¡ä»¶çš„æ–¹å¼å…¶å®ä¸ WHERE å­å¥ä¸ SELECT çš„æ–¹å¼ç±»ä¼¼ï¼Œè¯­æ³•ç›¸è¿‘ï¼Œä½† WHERE å­å¥æœç´¢æ¡ä»¶æ˜¯åœ¨åˆ†ç»„æ“ä½œä¹‹å‰ï¼Œè€Œ HAVING åˆ™æ˜¯åœ¨ä¹‹å</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span>   `column_name`, aggregate_function(`column_name`) <br><span class="hljs-keyword">FROM</span>     `table_name` <br><span class="hljs-keyword">WHERE</span>    `column_name` operator <span class="hljs-keyword">value</span> <br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> `column_name` <br><span class="hljs-keyword">HAVING</span>   aggregate_function(`column_name`) operator <span class="hljs-keyword">value</span>;<br></code></pre></td></tr></table></figure><ul><li>ex: æŸ¥è¯¢æ•™å¸ˆè¡¨ teachersè®¡ç®—ä¸åŒå›½ç±æ•™å¸ˆçš„å¹³å‡å¹´é¾„å’Œæ‰€æœ‰æ•™å¸ˆçš„å¹³å‡å¹´é¾„ï¼Œæ¯”è¾ƒä¸¤è€…çš„å¤§å°ï¼Œæœ€åè¿”å›å¤§äºæ‰€æœ‰æ•™å¸ˆå¹³å‡å¹´é¾„çš„ä¸åŒå›½ç±ä¸‹çš„å…¨éƒ¨æ•™å¸ˆä¿¡æ¯</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"># å­æŸ¥è¯¢<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> teachers <br>    <span class="hljs-keyword">WHERE</span> country <span class="hljs-keyword">IN</span><br>        (<span class="hljs-keyword">SELECT</span> country <span class="hljs-keyword">FROM</span> teachers <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> country<br>            <span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">AVG</span>(age) <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(age) <span class="hljs-keyword">FROM</span> teachers))<br></code></pre></td></tr></table></figure></li></ul><h3 id="å­æŸ¥è¯¢-Base"><a href="#å­æŸ¥è¯¢-Base" class="headerlink" title="å­æŸ¥è¯¢(Base)"></a>å­æŸ¥è¯¢(Base)</h3><ul><li>SELECT è¯­å¥ä¸­çš„å­æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name(s)`<br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` OPERATOR (<br>    <span class="hljs-keyword">SELECT</span> `column_name(s)`<br>    <span class="hljs-keyword">FROM</span> `table_name`<br>);<br></code></pre></td></tr></table></figure><ul><li>INSERT è¯­å¥ä¸­çš„å­æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `table_name`<br><span class="hljs-keyword">SELECT</span> `colnum_name(s)`<br><span class="hljs-keyword">FROM</span> `table_name`<br>[ <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">VALUE</span> OPERATOR ]<br></code></pre></td></tr></table></figure><ul><li>UPDATE è¯­å¥ä¸­çš„å­æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">UPDATE `table_name` <br><span class="hljs-keyword">SET</span> `column_name` <span class="hljs-operator">=</span> `new_value`<br><span class="hljs-keyword">WHERE</span> `column_name` OPERATOR <br>   (<span class="hljs-keyword">SELECT</span> `column_name`<br>   <span class="hljs-keyword">FROM</span> `table_name`<br>   [<span class="hljs-keyword">WHERE</span>] )<br></code></pre></td></tr></table></figure><ul><li>DELETE è¯­å¥ä¸­çš„å­æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` OPERATOR <br>   (<span class="hljs-keyword">SELECT</span> `column_name`<br>   <span class="hljs-keyword">FROM</span> `table_name`  <br>   [<span class="hljs-keyword">WHERE</span>] )<br></code></pre></td></tr></table></figure><h3 id="å­æŸ¥è¯¢-Adv"><a href="#å­æŸ¥è¯¢-Adv" class="headerlink" title="å­æŸ¥è¯¢(Adv.)"></a>å­æŸ¥è¯¢(Adv.)</h3><ul><li><p>å†…è”è§†å›¾å­æŸ¥è¯¢</p><ul><li>å°†æŸ¥è¯¢çš„ç»“æœé›†ä½œä¸ºä¸€ä¸ªæŸ¥è¯¢è¡¨ï¼Œç»§ç»­è¿›è¡ŒæŸ¥è¯¢æ“ä½œ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">FROM</span> (<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> xxxx<br>) `T`<br><span class="hljs-keyword">WHERE</span> xxx <span class="hljs-operator">=</span> (<br><span class="hljs-keyword">SELECT</span> xxxx<br>);<br></code></pre></td></tr></table></figure></li><li><p>IN æ“ä½œç¬¦çš„å¤šè¡Œå­æŸ¥è¯¢ / NOT IN </p></li><li><p>ANY æ“ä½œç¬¦çš„å¤šè¡Œå­æŸ¥è¯¢</p><ul><li>åœ¨å­æŸ¥è¯¢ä¸­ä½¿ç”¨ ANY ï¼Œè¡¨ç¤ºä¸å­æŸ¥è¯¢è¿”å›çš„ä»»ä½•å€¼æ¯”è¾ƒä¸ºçœŸï¼Œåˆ™è¿”å›çœŸ</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `column_name(s)`<br><span class="hljs-keyword">FROM</span> `table_name`<br><span class="hljs-keyword">WHERE</span> `column_name` OPERATOR<br>   <span class="hljs-keyword">ANY</span>(<span class="hljs-keyword">SELECT</span> column_name<br>   <span class="hljs-keyword">FROM</span> table_name)<br></code></pre></td></tr></table></figure></li><li><p>ALL æ“ä½œç¬¦çš„å¤šè¡Œå­æŸ¥è¯¢</p><ul><li>åœ¨å­æŸ¥è¯¢ä¸­ä½¿ç”¨ ALL ï¼Œè¡¨ç¤ºä¸å­æŸ¥è¯¢è¿”å›çš„æ‰€æœ‰å€¼æ¯”è¾ƒä¸ºçœŸï¼Œåˆ™è¿”å›çœŸ</li></ul></li><li><p>å¤šåˆ—å­æŸ¥è¯¢</p></li><li><p>HAVING å­å¥ä¸­çš„å­æŸ¥è¯¢</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>NOTE</category>
      
    </categories>
    
    
    <tags>
      
      <tag>note</tag>
      
      <tag>sql</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
