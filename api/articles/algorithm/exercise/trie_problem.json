{"title":"Trieä¸“é¢˜è®­ç»ƒ","uid":"845d8d8490a208e5b118592a6863cd87","slug":"algorithm/exercise/trie_problem","date":"2021-11-27T04:20:00.000Z","updated":"2022-01-22T09:37:15.580Z","comments":true,"path":"api/articles/algorithm/exercise/trie_problem.json","keywords":null,"cover":null,"content":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><h1><span id=\"trie-ä¸“é¢˜è®­ç»ƒ\">Trie ä¸“é¢˜è®­ç»ƒ</span></h1><p>0.0</p>\n<h2><span id=\"0x01-ç»Ÿè®¡éš¾é¢˜-hdu-1251\">0x01 ç»Ÿè®¡éš¾é¢˜ HDU 1251</span></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://acm.dingbacode.com/showproblem.php?pid=1251\">link</a></p>\n<p>é¢˜æ„ï¼šç»™äº†ä¸€å †å­—ç¬¦ä¸²ï¼Œç»Ÿè®¡ä»¥æ¨¡å¼ä¸²ä½œå‰ç¼€å‡ºç°çš„å•è¯ä¸ªæ•°</p>\n<p>trieå…¥é—¨é¢˜ï¼Œå­˜ç»“ç‚¹æ—¶ç»Ÿè®¡ä¸€ä¸‹è¿‡å½“å‰ç»“ç‚¹çš„å•è¯ä¸ªæ•°å³å¯</p></blockquote>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">&#x2F;&#x2F;å¯¹äºå­—ç¬¦ä¸²æ¯”è¾ƒå¤šçš„è¦ç»Ÿè®¡ä¸ªæ•°çš„ï¼Œmapè¢«å¡çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ç”¨å­—å…¸æ ‘\n&#x2F;&#x2F;å¾ˆå¤šé¢˜éƒ½æ˜¯è¦ç”¨åˆ°èŠ‚ç‚¹ä¸‹æ ‡æ¥è¡¨ç¤ºæŸä¸ªå­—ç¬¦ä¸²\nconst int maxn &#x3D; 2e6 + 5;  &#x2F;&#x2F;å¦‚æœæ˜¯64MBå¯ä»¥å¼€åˆ°2e6+5ï¼Œå°½é‡å¼€å¤§\nint tree[maxn][30];        &#x2F;&#x2F;tree[i][j]è¡¨ç¤ºèŠ‚ç‚¹içš„ç¬¬jä¸ªå„¿å­çš„èŠ‚ç‚¹ç¼–å·\nbool flagg[maxn];          &#x2F;&#x2F;è¡¨ç¤ºä»¥è¯¥èŠ‚ç‚¹ç»“å°¾æ˜¯ä¸€ä¸ªå•è¯\nint tot;                   &#x2F;&#x2F;æ€»èŠ‚ç‚¹æ•°\nint cnt[maxn];\nvoid insert_(char* str) &#123;\n    int len &#x3D; strlen(str);\n    int root &#x3D; 0;\n    for (int i &#x3D; 0; i &lt; len; i++) &#123;\n        int id &#x3D; str[i] - &#39;a&#39;;\n        if (!tree[root][id])\n            tree[root][id] &#x3D; ++tot;\n        root &#x3D; tree[root][id];\n        cnt[root]++;\n    &#125;\n    flagg[root] &#x3D; true;\n&#125;\nbool find_(char* str) &#123;  &#x2F;&#x2F;æŸ¥è¯¢æ“ä½œï¼ŒæŒ‰å…·ä½“è¦æ±‚æ”¹åŠ¨\n    int len &#x3D; strlen(str);\n    int root &#x3D; 0;\n    int ans;\n    for (int i &#x3D; 0; i &lt; len; i++) &#123;\n        int id &#x3D; str[i] - &#39;a&#39;;\n        if (!tree[root][id])\n            return false;\n        root &#x3D; tree[root][id];\n        &#x2F;&#x2F; if(!flagg[root] &amp;&amp; i&#x3D;&#x3D;len-1) return false;   &#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦ä¸¤ä¸ªå•è¯å®Œå…¨åŒ¹é…\n    &#125;\n    ans &#x3D; cnt[root];\n    cout&lt;&lt;ans&lt;&lt;endl;\n    return true;\n&#125;\nvoid init() &#123;  &#x2F;&#x2F;æœ€åæ¸…ç©ºï¼ŒèŠ‚çœæ—¶é—´\n    for (int i &#x3D; 0; i &lt;&#x3D; tot; i++) &#123;\n        flagg[i] &#x3D; false;\n        for (int j &#x3D; 0; j &lt; 10; j++)\n            tree[i][j] &#x3D; 0;\n    &#125;\n    memset(cnt,0,sizeof(cnt));\n    tot &#x3D; 0;  &#x2F;&#x2F;REæœ‰å¯èƒ½æ˜¯è¿™é‡Œçš„é—®é¢˜\n&#125;\nvoid solve() &#123;\n    char str[15];\n    init();\n    while(gets(str)&amp;&amp;str[0]!&#x3D;&#39;\\0&#39;)&#123;\n        insert_(str);\n    &#125;\n    while(gets(str)&amp;&amp;str[0]!&#x3D;EOF)&#123;\n        bool t &#x3D; find_(str);\n        if(!t) cout&lt;&lt;0&lt;&lt;endl;    \n    &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2><span id=\"0x02-remember-the-word-la-3942\">0x02 Remember the Word LA 3942</span></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://vjudge.net/problem/UVALive-3942\">link</a></p>\n<p>é¢˜æ„ï¼š</p>\n<p>ç»™å‡ºä¸€ä¸ªç”±Sä¸ªä¸åŒå•è¯ç»„æˆçš„å­—å…¸å’Œä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼ŒæŠŠè¿™ä¸ªå­—ç¬¦ä¸²åˆ†è§£æˆè‹¥å¹²ä¸ªå•è¯çš„è¿æ¥(å¯é‡å¤ä½¿ç”¨)ï¼Œæœ‰å¤šå°‘ç§æ–¹æ³•ã€‚ex: æœ‰å››ä¸ªå•è¯ï¼ša, b, cd, abï¼›åˆ™abcdæœ‰ä¸¤ç§åˆ†è§£æ–¹æ³•ï¼ša+b+cd å’Œ ab+cd</p>\n<p>æ€è·¯ï¼š</p>\n<p>dp + Trie</p>\n<p>è®¡æ•°é—®é¢˜è€ƒè™‘dpï¼š</p>\n<p>è€ƒè™‘çŠ¶æ€ï¼š<code>dp[i]</code> ä¸ºä»¥iå¼€å§‹çš„åç¼€çš„æ–¹æ¡ˆæ•°</p>\n<p>è€ƒè™‘è½¬ç§»ï¼šå› ä¸ºå•è¯é•¿åº¦ä¸å¤§äº100ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æš´åŠ›å‘åçœ‹å½“å‰å•è¯æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥å¯ä»¥ç”¨Trieæˆ–è€…å­—ç¬¦ä¸²å“ˆå¸Œå®Œæˆ</p>\n<p>ä»¤dp(i)è¡¨ç¤ºä»å­—ç¬¦iå¼€å§‹çš„å­—ç¬¦ä¸²ï¼Œdp(i)=sum{dp(i+len(x))}, xæ˜¯s[iâ€¦L]çš„å‰ç¼€ã€‚ç„¶åæŠŠæ‰€æœ‰å¯åˆ†è§£æˆçš„å•è¯æ„é€ æˆä¸€é¢—Trieæ ‘ï¼Œå†è®©æ¯ä¸²åœ¨ä¸Šé¢è·‘ï¼Œdp[0]å³æ˜¯æ–¹æ¡ˆæ€»æ•°ã€‚</p></blockquote>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include &lt;bits&#x2F;stdc++.h&gt;\n#define maxn 300005\n#define mod 20071027\nchar P[maxn];\n#define rep(i, x, y) for (int i &#x3D; x; i &lt; y; i++)\n#define red(i, x, y) for (int i &#x3D; x; i &gt;&#x3D; y; i--)\nusing namespace std;\nint dp[maxn];        &#x2F;&#x2F;dp[i] ä¸ºä»¥iå¼€å§‹çš„åç¼€çš„æ–¹æ¡ˆæ•°\nint tree[maxn][30];  &#x2F;&#x2F;tree[i][j]è¡¨ç¤ºèŠ‚ç‚¹içš„ç¬¬jä¸ªå„¿å­çš„èŠ‚ç‚¹ç¼–å·\nbool flagg[maxn];    &#x2F;&#x2F;è¡¨ç¤ºä»¥è¯¥èŠ‚ç‚¹ç»“å°¾æ˜¯ä¸€ä¸ªå•è¯\nint tot;             &#x2F;&#x2F;æ€»èŠ‚ç‚¹æ•°\nint m;               &#x2F;&#x2F;ä¸»ä¸²é•¿åº¦\nvoid insert_(char* str) &#123;\n    int len &#x3D; strlen(str);\n    int root &#x3D; 0;\n    for (int i &#x3D; 0; i &lt; len; i++) &#123;\n        int id &#x3D; str[i] - &#39;a&#39;;\n        if (!tree[root][id])\n            tree[root][id] &#x3D; ++tot;\n        root &#x3D; tree[root][id];\n    &#125;\n    flagg[root] &#x3D; true;\n&#125;\nvoid find_(int id) &#123;  &#x2F;&#x2F;æŸ¥è¯¢æ“ä½œï¼ŒæŒ‰å…·ä½“è¦æ±‚æ”¹åŠ¨\n    int root &#x3D; 0;\n    for (int i &#x3D; id; i &lt;&#x3D; m; i++) &#123;\n        int k &#x3D; P[i] - &#39;a&#39;;\n        if (!tree[root][k]) break;\n        root &#x3D; tree[root][k];\n        if (flagg[root])    \n            dp[id] &#x3D; (dp[id] + dp[i + 1]) % mod;\n    &#125;\n&#125;\nvoid init() &#123; \n    for (int i &#x3D; 0; i &lt;&#x3D; tot; i++) &#123;\n        flagg[i] &#x3D; false;\n        for (int j &#x3D; 0; j &lt; 30; j++)\n            tree[i][j] &#x3D; 0;\n    &#125;\n    memset(dp, 0, sizeof(dp));\n    tot &#x3D; 0; \n&#125;\nchar c[105];\nint main() &#123;\n    long long times &#x3D; 0;\n    init();\n    while (scanf(&quot;%s&quot;, P)!&#x3D;EOF) &#123;\n        times++;\n        int S;\n        cin &gt;&gt; S;\n        &#x2F;&#x2F; init();\n        rep(i, 0, S) &#123;\n            scanf(&quot;%s&quot;, c);\n            insert_(c);\n        &#125;\n        m &#x3D; strlen(P);\n        dp[m] &#x3D; 1;\n        red(i, m, 0) &#123;\n            find_(i);\n        &#125;\n        cout &lt;&lt; &quot;Case &quot; &lt;&lt; times &lt;&lt; &quot;: &quot; &lt;&lt; dp[0] &lt;&lt; endl;\n        init();\n    &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2><span id=\"0x03-strcmp-anyone\">0x03 â€œstrcmp()â€ Anyone?</span></h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://vjudge.net/problem/UVA-11732\">link</a></p>\n<p>é¢˜æ„ï¼š</p>\n<p>è¾“å…¥nä¸ªå­—ç¬¦ä¸²ï¼Œä¸¤ä¸¤è°ƒç”¨ä¸€æ¬¡strcmp()ï¼Œé—®å­—ç¬¦æ¯”è¾ƒçš„æ€»æ¬¡æ•°æ˜¯å¤šå°‘ï¼Ÿex:</p>\n<p><code>strcmp(â€œthanâ€, &quot;that&quot;)ï¼šcnt = 7</code></p>\n<p>é¢˜è§£ï¼šä¸¤ä¸ªå­—ç¬¦ä¸²æ¯”è¾ƒæ¬¡æ•°å…¶å®æ˜¯ <strong>ç›¸åŒå­—ç¬¦æ•°*2 + (å­˜åœ¨ä¸åŒå­—ç¬¦? 1 : 0)</strong>ï¼›ç„¶åå»ºå­—å…¸æ ‘ï¼Œdfsä¸€ä¸‹å³å¯ã€‚å› ä¸ºèŠ‚ç‚¹çš„ä¸ªæ•°æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ç”¨å·¦å­©å­å³å…„å¼Ÿçš„æ–¹æ³•å»ºç«‹å­—å…¸æ ‘ã€‚</p></blockquote>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">#include&lt;bits&#x2F;stdc++.h&gt;\nusing namespace std;\nconst int maxnode &#x3D; 4000 * 1000 + 10;\nconst int sigma_size &#x3D; 26;\n&#x2F;&#x2F; å­—æ¯è¡¨ä¸ºå…¨ä½“å°å†™å­—æ¯çš„Trie\nstruct Trie &#123;\n    int head[maxnode];  &#x2F;&#x2F; head[i]ä¸ºç¬¬iä¸ªç»“ç‚¹çš„å·¦å„¿å­ç¼–å·\n    int next[maxnode];  &#x2F;&#x2F; next[i]ä¸ºç¬¬iä¸ªç»“ç‚¹çš„å³å…„å¼Ÿç¼–å·\n    char ch[maxnode];   &#x2F;&#x2F; ch[i]ä¸ºç¬¬iä¸ªç»“ç‚¹ä¸Šçš„å­—ç¬¦\n    int tot[maxnode];   &#x2F;&#x2F; tot[i]ä¸ºç¬¬iä¸ªç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘åŒ…å«çš„å¶ç»“ç‚¹æ€»æ•°\n    int sz;             &#x2F;&#x2F; ç»“ç‚¹æ€»æ•°\n    long long ans;      &#x2F;&#x2F; ç­”æ¡ˆ\n    void clear() &#123;\n        sz &#x3D; 1;\n        tot[0] &#x3D; head[0] &#x3D; next[0] &#x3D; 0;\n    &#125;  &#x2F;&#x2F; åˆå§‹æ—¶åªæœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹\n\n    &#x2F;&#x2F; æ’å…¥å­—ç¬¦ä¸²sï¼ˆåŒ…æ‹¬æœ€åçš„&#39;\\0&#39;ï¼‰ï¼Œæ²¿é€”æ›´æ–°tot\n    void insert(const char* s) &#123;\n        int u &#x3D; 0, v, n &#x3D; strlen(s);\n        tot[0]++;\n        for (int i &#x3D; 0; i &lt;&#x3D; n; i++) &#123;\n            &#x2F;&#x2F; æ‰¾å­—ç¬¦a[i]\n            bool found &#x3D; false;\n            for (v &#x3D; head[u]; v !&#x3D; 0; v &#x3D; next[v])\n                if (ch[v] &#x3D;&#x3D; s[i]) &#123;  &#x2F;&#x2F; æ‰¾åˆ°äº†\n                    found &#x3D; true;\n                    break;\n                &#125;\n            if (!found) &#123;\n                v &#x3D; sz++;  &#x2F;&#x2F; æ–°å»ºç»“ç‚¹\n                tot[v] &#x3D; 0;\n                ch[v] &#x3D; s[i];\n                next[v] &#x3D; head[u];\n                head[u] &#x3D; v;  &#x2F;&#x2F; æ’å…¥åˆ°é“¾è¡¨çš„é¦–éƒ¨\n                head[v] &#x3D; 0;\n            &#125;\n            u &#x3D; v;\n            tot[u]++;\n        &#125;\n    &#125;\n\n    &#x2F;&#x2F; ç»Ÿè®¡LCP&#x3D;uçš„æ‰€æœ‰å•è¯ä¸¤ä¸¤çš„æ¯”è¾ƒæ¬¡æ•°ä¹‹å’Œ\n    void dfs(int depth, int u) &#123;\n        if (head[u] &#x3D;&#x3D; 0)  &#x2F;&#x2F; å¶ç»“ç‚¹\n            ans +&#x3D; tot[u] * (tot[u] - 1) * depth;\n        else &#123;\n            int sum &#x3D; 0;\n            for (int v &#x3D; head[u]; v !&#x3D; 0; v &#x3D; next[v])\n                sum +&#x3D; tot[v] * (tot[u] - tot[v]);  &#x2F;&#x2F; å­æ ‘vä¸­é€‰ä¸€ä¸ªä¸²ï¼Œå…¶ä»–å­æ ‘ä¸­å†é€‰ä¸€ä¸ª\n            ans +&#x3D; sum &#x2F; 2 * (2 * depth + 1);       &#x2F;&#x2F; é™¤ä»¥2æ˜¯æ¯ç§é€‰æ³•ç»Ÿè®¡äº†ä¸¤æ¬¡\n            for (int v &#x3D; head[u]; v !&#x3D; 0; v &#x3D; next[v])\n                dfs(depth + 1, v);\n        &#125;\n    &#125;\n\n    &#x2F;&#x2F; ç»Ÿè®¡\n    long long count() &#123;\n        ans &#x3D; 0;\n        dfs(0, 0);\n        return ans;\n    &#125;\n&#125;;\nconst int maxl &#x3D; 1000 + 10;  &#x2F;&#x2F; æ¯ä¸ªå•è¯æœ€å¤§é•¿åº¦\nint n;\nchar word[maxl];\nTrie trie;\nint main() &#123;\n    int kase &#x3D; 1;\n    while (scanf(&quot;%d&quot;, &amp;n) &#x3D;&#x3D; 1 &amp;&amp; n) &#123;\n        trie.clear();\n        for (int i &#x3D; 0; i &lt; n; i++) &#123;\n            scanf(&quot;%s&quot;, word);\n            trie.insert(word);\n        &#125;\n        printf(&quot;Case %d: %lld\\n&quot;, kase++, trie.count());\n    &#125;\n    return 0;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","text":"Trie ä¸“é¢˜è®­ç»ƒ0.0 0x01 ç»Ÿè®¡éš¾é¢˜ HDU 1251 link é¢˜æ„ï¼šç»™äº†ä¸€å †å­—ç¬¦ä¸²ï¼Œç»Ÿè®¡ä»¥æ¨¡å¼ä¸²ä½œå‰ç¼€å‡ºç°çš„å•è¯ä¸ªæ•° trieå…¥é—¨é¢˜ï¼Œå­˜ç»“ç‚¹æ—¶ç»Ÿè®¡ä¸€ä¸‹è¿‡å½“å‰ç»“ç‚¹çš„å•è¯ä¸ªæ•°å³å¯ &#x2F;&#x2F;å¯¹äºå­—ç¬¦ä¸²æ¯”è¾ƒå¤šçš„è¦ç»Ÿè®¡ä¸ªæ•°çš„ï¼Œmapè¢«å¡çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ç”¨å­—å…¸æ ‘ &...","link":"","photos":[],"count_time":{"symbolsCount":"7.1k","symbolsTime":"6 mins."},"categories":[{"name":"ALGORITHM TRAINING","slug":"ALGORITHM-TRAINING","count":2,"path":"api/categories/ALGORITHM-TRAINING.json"}],"tags":[{"name":"ACM","slug":"ACM","count":26,"path":"api/tags/ACM.json"},{"name":"string","slug":"string","count":5,"path":"api/tags/string.json"},{"name":"dp","slug":"dp","count":5,"path":"api/tags/dp.json"},{"name":"algorithm","slug":"algorithm","count":8,"path":"api/tags/algorithm.json"},{"name":"Trie","slug":"Trie","count":2,"path":"api/tags/Trie.json"},{"name":"dfs","slug":"dfs","count":1,"path":"api/tags/dfs.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\"><span class=\"toc-text\">Trie ä¸“é¢˜è®­ç»ƒ</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\"><span class=\"toc-text\">0x01 ç»Ÿè®¡éš¾é¢˜ HDU 1251</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\"><span class=\"toc-text\">0x02 Remember the Word LA 3942</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\"><span class=\"toc-text\">0x03 â€œstrcmp()â€ Anyone?</span></a></li></ol></li></ol>","author":{"name":"Maskros","slug":"blog-author","avatar":"/img/logo_Maskros.jpg","link":"/","description":"Be Legendary within the hasty keys","socials":{"github":"https://github.com/Maskros-new","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-bilibili-line","link":"https://space.bilibili.com/355516889"},"codeforces":{"icon":"iconfont icon-codeforces","link":"https://codeforces.com/profile/1ronMaker"},"mail":{"icon":"iconfont icon-mail","link":"mailto:1164528260@qq.com"}}}},"mapped":true,"prev_post":{"title":"Notes on Kurose's Computer Networkingï¼šA TOP-DOWN APPROACH","uid":"73cfcb86305a1dc05f8e11e3779f31e9","slug":"note/ComputerNetwork_Note","date":"2021-12-10T05:44:28.000Z","updated":"2021-12-25T07:11:55.191Z","comments":true,"path":"api/articles/note/ComputerNetwork_Note.json","keywords":null,"cover":[],"text":"Notes on Kuroseâ€™s Computer NetworkingA TOP-DOWN APPROACH Thanks to æˆ‘çˆ¹çš„åšå®¢ï¼Œè®©æˆ‘å·äº†ä¸å°‘ğŸ˜‹ Chapter 1 Computer Networks and the Internet1.1 What is the...","link":"","photos":[],"count_time":{"symbolsCount":"23k","symbolsTime":"21 mins."},"categories":[{"name":"NOTE","slug":"NOTE","count":5,"path":"api/categories/NOTE.json"}],"tags":[{"name":"note","slug":"note","count":11,"path":"api/tags/note.json"},{"name":"ComputerNetwork","slug":"ComputerNetwork","count":1,"path":"api/tags/ComputerNetwork.json"}],"author":{"name":"Maskros","slug":"blog-author","avatar":"/img/logo_Maskros.jpg","link":"/","description":"Be Legendary within the hasty keys","socials":{"github":"https://github.com/Maskros-new","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-bilibili-line","link":"https://space.bilibili.com/355516889"},"codeforces":{"icon":"iconfont icon-codeforces","link":"https://codeforces.com/profile/1ronMaker"},"mail":{"icon":"iconfont icon-mail","link":"mailto:1164528260@qq.com"}}}}},"next_post":{"title":"Trie","uid":"f9c5a67ed89813cc4d2fda9f690375dd","slug":"algorithm/learn/trie","date":"2021-11-27T03:55:50.000Z","updated":"2022-01-22T09:37:06.172Z","comments":true,"path":"api/articles/algorithm/learn/trie.json","keywords":null,"cover":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimage.bubuko.com%2Finfo%2F202001%2F20200113201445546817.jpg&refer=http%3A%2F%2Fimage.bubuko.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1640577246&t=4f6b0ed3fef63f86e86da00e1973e1f0","text":"Trieå­—å…¸æ ‘/å‰ç¼€æ ‘ ä»€ä¹ˆæ˜¯Trie ä»æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªå•è¯ç»“ç‚¹çš„è·¯å¾„ä¸Šæ‰€æœ‰å­—æ¯è¿æ¥æˆçš„å­—ç¬¦ä¸²å°±æ˜¯è¯¥ç»“ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸² å¤šå‰æ ‘ï¼Œæœ€å¤§åˆ†æ”¯æ•°ç”±å­—å…¸çš„å­—ç¬¦é›†å«æœ‰çš„å­—ç¬¦æ•°å†³å®š æ“ä½œ æ’å…¥å­—ç¬¦ä¸² insert åˆå§‹åŒ– root = 0 , éå†å­—ç¬¦ä¸², å¯¹äºå…¶æ¯ä¸€ä¸ªå­—ç¬¦, è®¡ç®—å…¶æ˜ å°„å€¼ id...","link":"","photos":[],"count_time":{"symbolsCount":"4.8k","symbolsTime":"4 mins."},"categories":[{"name":"ALGORITHMS","slug":"ALGORITHMS","count":6,"path":"api/categories/ALGORITHMS.json"}],"tags":[{"name":"ACM","slug":"ACM","count":26,"path":"api/tags/ACM.json"},{"name":"string","slug":"string","count":5,"path":"api/tags/string.json"},{"name":"note","slug":"note","count":11,"path":"api/tags/note.json"},{"name":"algorithm","slug":"algorithm","count":8,"path":"api/tags/algorithm.json"},{"name":"Trie","slug":"Trie","count":2,"path":"api/tags/Trie.json"}],"author":{"name":"Maskros","slug":"blog-author","avatar":"/img/logo_Maskros.jpg","link":"/","description":"Be Legendary within the hasty keys","socials":{"github":"https://github.com/Maskros-new","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-bilibili-line","link":"https://space.bilibili.com/355516889"},"codeforces":{"icon":"iconfont icon-codeforces","link":"https://codeforces.com/profile/1ronMaker"},"mail":{"icon":"iconfont icon-mail","link":"mailto:1164528260@qq.com"}}}}}}