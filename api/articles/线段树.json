{"title":"æˆ‘ç¡®å®ä¸ä¼šçº¿æ®µæ ‘","uid":"e4b68a32c6fd94c2953f12692556d556","slug":"çº¿æ®µæ ‘","date":"2021-08-06T08:14:31.000Z","updated":"2022-01-22T09:37:32.683Z","comments":true,"path":"api/articles/çº¿æ®µæ ‘.json","keywords":null,"cover":"https://img0.baidu.com/it/u=1851813078,3504357646&fm=26&fmt=auto&gp=0.jpg","content":"<h1 id=\"çº¿æ®µæ ‘\"><a href=\"#çº¿æ®µæ ‘\" class=\"headerlink\" title=\"çº¿æ®µæ ‘\"></a>çº¿æ®µæ ‘</h1><p>Segment Tree</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>ä¸€ä¸ªé—®é¢˜ï¼Œåªè¦èƒ½åŒ–æˆå¯¹ä¸€äº›è¿ç»­ç‚¹çš„ä¿®æ”¹å’Œç»Ÿè®¡é—®é¢˜ï¼ŒåŸºæœ¬å°±å¯ä»¥ç”¨çº¿æ®µæ ‘æ¥è‰¹äº†</p></blockquote>\n<hr>\n<p>åŸç†ï¼šå°†[1,n]åˆ†è§£æˆè‹¥å¹²ç‰¹å®šçš„å­åŒºé—´(æ•°é‡ä¸è¶…è¿‡4*n),ç„¶åï¼Œå°†æ¯ä¸ªåŒºé—´[L,R]éƒ½åˆ†è§£ä¸ºå°‘é‡ç‰¹å®šçš„å­åŒºé—´ï¼Œé€šè¿‡å¯¹è¿™äº›å°‘é‡å­åŒºé—´çš„ä¿®æ”¹æˆ–è€…ç»Ÿè®¡ï¼Œæ¥å®ç°å¿«é€Ÿå¯¹[L,R]çš„ä¿®æ”¹æˆ–è€…ç»Ÿè®¡ã€‚æ¯ä¸€ä¸ªéå¶ç»“ç‚¹æ‰€è¡¨ç¤ºçš„ç»“ç‚¹[a,b]ï¼Œå…¶å·¦å„¿å­è¡¨ç¤ºçš„åŒºé—´ä¸º[a,(a+b)/2]ï¼Œå³å„¿å­è¡¨ç¤ºçš„åŒºé—´ä¸º[(a+b)/2,b]ã€‚</p>\n<p>ä½œç”¨ï¼šå¯¹ç¼–å·è¿ç»­çš„ä¸€äº›ç‚¹çš„åŒºé—´ä¿¡æ¯è¿›è¡Œä¿®æ”¹æˆ–è€…ç»Ÿè®¡æ“ä½œï¼Œç”¨çº¿æ®µæ ‘ç»Ÿè®¡çš„ä¸œè¥¿ï¼Œå¿…é¡»ç¬¦åˆ<strong>åŒºé—´åŠ æ³•</strong>ã€‚ä¸æ ‘çŠ¶æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œçº¿æ®µæ ‘ä¸æ­¢é€‚ç”¨äºåŒºé—´æ±‚å’Œçš„æŸ¥è¯¢ï¼Œä¹Ÿå¯ä»¥è¿›è¡ŒåŒºé—´æœ€å¤§å€¼ï¼ŒåŒºé—´æœ€å°å€¼ï¼Œæˆ–è€…åŒºé—´å¼‚æˆ–å€¼çš„æŸ¥è¯¢ã€‚</p>\n<p>ä¸»è¦æ“ä½œï¼šåŒºé—´æŸ¥è¯¢ã€ç‚¹æ›´æ–°ã€åŒºé—´æ›´æ–°</p>\n<p>ä¾‹å¦‚ï¼š</p>\n<ul>\n<li>ç»™å®šså’Œtï¼Œæ±‚å…¶åŒºé—´ä¸Šçš„æœ€å°å€¼</li>\n<li>ç»™å®šiå’Œxï¼ŒæŠŠaiçš„å€¼æ”¹æˆx</li>\n</ul>\n<p>æ›´æ–°å’ŒåŒºé—´æŸ¥è¯¢çš„å¤æ‚åº¦éƒ½æ˜¯ <strong>O(log(N))</strong></p>\n<h2 id=\"æ“ä½œ\"><a href=\"#æ“ä½œ\" class=\"headerlink\" title=\"æ“ä½œ\"></a>æ“ä½œ</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>build, update(å†…å«push_down), query</p></blockquote>\n<h3 id=\"å»ºæ ‘-build\"><a href=\"#å»ºæ ‘-build\" class=\"headerlink\" title=\"å»ºæ ‘ (build)\"></a>å»ºæ ‘ (build)</h3><p>çº¿æ®µæ ‘æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯¹åº”ä¸€æ¡çº¿æ®µ(åŒºé—´)ï¼Œåä¹‹ä¸æˆç«‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ $p$ çš„å·¦å³å­èŠ‚ç‚¹çš„ç¼–å·åˆ†åˆ«ä¸º $2p$ å’Œ $2p+1$ ï¼Œå‡å¦‚èŠ‚ç‚¹ $p$ å‚¨å­˜åŒºé—´ $[a,b]$ çš„å’Œï¼Œè®¾ $mid=[\\frac{l+r}{2}]$ï¼Œé‚£ä¹ˆä¸¤ä¸ªå­èŠ‚ç‚¹åˆ†åˆ«å‚¨å­˜ $[l,mid]$ å’Œ $[mid+1,r]$ çš„å’Œã€‚å¯ä»¥å‘ç°ï¼Œå·¦èŠ‚ç‚¹å¯¹åº”çš„åŒºé—´é•¿åº¦ï¼Œä¸å³èŠ‚ç‚¹ç›¸åŒæˆ–è€…æ¯”ä¹‹æ°å¥½å¤š $1$ã€‚</p>\n<p>æ•…å»ºæ ‘å¯è€ƒè™‘é€’å½’è¿›è¡Œï¼š</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">void build(ll l &#x3D; 1, ll r &#x3D; n, ll p &#x3D; 1)\n&#123;\n    if (l &#x3D;&#x3D; r) &#x2F;&#x2F; åˆ°è¾¾å¶å­èŠ‚ç‚¹\n        tree[p]&#x3D;A[l]; &#x2F;&#x2F; ç”¨æ•°ç»„ä¸­çš„æ•°æ®èµ‹å€¼\n    else&#123;\n        ll mid &#x3D; (l + r) &#x2F; 2;\n        build(l, mid, p * 2); &#x2F;&#x2F; å…ˆå»ºç«‹å·¦å³å­èŠ‚ç‚¹\n        build(mid + 1, r, p * 2 + 1);\n        tree[p] &#x3D; tree[p * 2] + tree[p * 2 + 1]; &#x2F;&#x2F; è¯¥èŠ‚ç‚¹çš„å€¼ç­‰äºå·¦å³å­èŠ‚ç‚¹ä¹‹å’Œ\n    &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p> è¿™é‡ŒğŸ‘´å·äº†ä¸ª gif æ¥æ¼”ç¤ºä¸€ä¸‹è¿‡ç¨‹ (è™½ç„¶å¤§éƒ¨åˆ†éƒ½æ˜¯å·çš„ğŸ¤¡)</p>\n<img src=\"https://pic4.zhimg.com/v2-c2d11b12c87b6a7076e3df0bb3585423_b.webp\" alt=\"img\" style=\"zoom:60%;\" />\n\n<h3 id=\"åŒºé—´ä¿®æ”¹-update\"><a href=\"#åŒºé—´ä¿®æ”¹-update\" class=\"headerlink\" title=\"åŒºé—´ä¿®æ”¹(update)\"></a>åŒºé—´ä¿®æ”¹(update)</h3><p>é¦–å…ˆå®šä¹‰â€<strong>æ‡’æ ‡è®°</strong>â€œ(å³â€œå»¶è¿Ÿæ ‡è®°â€) <code>mark[]</code>ï¼š</p>\n<p>å¯¹äºåŒºé—´ä¿®æ”¹ï¼Œæœ´ç´ çš„æƒ³æ³•æ˜¯ç”¨<strong>é€’å½’</strong>çš„æ–¹å¼ä¸€å±‚å±‚ä¿®æ”¹ï¼ˆç±»ä¼¼äºçº¿æ®µæ ‘çš„å»ºç«‹ï¼‰ï¼Œä½†è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦æ¯”è¾ƒé«˜ã€‚ä½¿ç”¨æ‡’æ ‡è®°åï¼Œå¯¹äºé‚£äº›æ­£å¥½æ˜¯çº¿æ®µæ ‘èŠ‚ç‚¹çš„åŒºé—´ï¼Œæˆ‘ä»¬ä¸ç»§ç»­é€’å½’ä¸‹å»ï¼Œè€Œæ˜¯æ‰“ä¸Šä¸€ä¸ª<strong>æ ‡è®°</strong>ï¼Œå°†æ¥è¦ç”¨åˆ°å®ƒçš„<strong>å­åŒºé—´</strong>çš„æ—¶å€™ï¼Œå†å‘ä¸‹<strong>ä¼ é€’</strong></p>\n<p>ç›´æ¥ä¸ŠğŸ´ (éæœ€ç®€):</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">void update(ll l, ll r, ll d, ll p &#x3D; 1, ll cl &#x3D; 1, ll cr &#x3D; n)\n&#123;\n    if (cl &gt; r || cr &lt; l) &#x2F;&#x2F; åŒºé—´æ— äº¤é›†\n        return; &#x2F;&#x2F; å‰ªæ\n    else if (cl &gt;&#x3D; l &amp;&amp; cr &lt;&#x3D; r) &#x2F;&#x2F; å½“å‰èŠ‚ç‚¹å¯¹åº”çš„åŒºé—´åŒ…å«åœ¨ç›®æ ‡åŒºé—´ä¸­\n    &#123;\n        tree[p] +&#x3D; (cr - cl + 1) * d; &#x2F;&#x2F; æ›´æ–°å½“å‰åŒºé—´çš„å€¼\n        if (cr &gt; cl) &#x2F;&#x2F; å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹\n            mark[p] +&#x3D; d; &#x2F;&#x2F; ç»™å½“å‰åŒºé—´æ‰“ä¸Šæ ‡è®°\n    &#125;\n    else &#x2F;&#x2F; ä¸ç›®æ ‡åŒºé—´æœ‰äº¤é›†ï¼Œä½†ä¸åŒ…å«äºå…¶ä¸­\n    &#123;\n        ll mid &#x3D; (cl + cr) &#x2F; 2;\n        mark[p * 2] +&#x3D; mark[p]; &#x2F;&#x2F; æ ‡è®°å‘ä¸‹ä¼ é€’\n        mark[p * 2 + 1] +&#x3D; mark[p];\n        tree[p * 2] +&#x3D; mark[p] * (mid - cl + 1); &#x2F;&#x2F; å¾€ä¸‹æ›´æ–°ä¸€å±‚\n        tree[p * 2 + 1] +&#x3D; mark[p] * (cr - mid);\n        mark[p] &#x3D; 0; &#x2F;&#x2F; æ¸…é™¤æ ‡è®°\n        update(l, r, d, p * 2, cl, mid); &#x2F;&#x2F; é€’å½’åœ°å¾€ä¸‹å¯»æ‰¾\n        update(l, r, d, p * 2 + 1, mid + 1, cr);\n        tree[p] &#x3D; tree[p * 2] + tree[p * 2 + 1]; &#x2F;&#x2F; æ ¹æ®å­èŠ‚ç‚¹æ›´æ–°å½“å‰èŠ‚ç‚¹çš„å€¼\n    &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä»æœ€å¤§çš„åŒºé—´å¼€å§‹ï¼Œé€’å½’å‘ä¸‹å¤„ç†ã€‚æ³¨æ„åˆ°ï¼Œ<strong>ä»»ä½•åŒºé—´éƒ½æ˜¯çº¿æ®µæ ‘ä¸ŠæŸäº›èŠ‚ç‚¹çš„å¹¶é›†</strong>ã€‚äºæ˜¯æˆ‘ä»¬è®°ç›®æ ‡åŒºé—´ä¸º $[l,r] $ï¼Œå½“å‰åŒºé—´ä¸º $[cl,cr]$ ï¼Œ å½“å‰èŠ‚ç‚¹ä¸º $p$ ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°ä¸‰ç§æƒ…å†µï¼š</p>\n<ol>\n<li><p>å½“å‰åŒºé—´ä¸ç›®æ ‡åŒºé—´æ²¡æœ‰äº¤é›†ï¼š</p>\n<p>ç›´æ¥ç»“æŸé€’å½’</p>\n</li>\n<li><p>å½“å‰åŒºé—´è¢«åŒ…æ‹¬åœ¨ç›®æ ‡åŒºé—´é‡Œï¼š</p>\n<p>å¯ä»¥æ›´æ–°åŒºé—´ï¼Œä¸èƒ½å¿˜è®°ä¹˜ä¸ŠåŒºé—´é•¿åº¦</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">tree[p] +&#x3D; (cr - cl + 1) * d;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>ç„¶åæ‰“ä¸Šæ‡’æ ‡è®°ï¼ˆå¶å­èŠ‚ç‚¹å¯ä»¥ä¸æ‰“æ ‡è®°ï¼Œå› ä¸ºä¸ä¼šå†å‘ä¸‹ä¼ é€’äº†ï¼‰</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">mark[p] +&#x3D; d;\t&#x2F;&#x2F;è¡¨ç¤ºâ€œè¯¥åŒºé—´ä¸Šæ¯ä¸€ä¸ªç‚¹éƒ½è¦åŠ ä¸Šdâ€ã€‚å› ä¸ºåŸæ¥å¯èƒ½å­˜åœ¨æ ‡è®°ï¼Œæ‰€ä»¥æ˜¯+&#x3D;è€Œä¸æ˜¯&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><p>å½“å‰åŒºé—´ä¸ç›®æ ‡åŒºé—´ç›¸äº¤ï¼Œä½†ä¸åŒ…å«äºå…¶ä¸­:</p>\n<p>è¿™æ—¶æŠŠå½“å‰åŒºé—´ä¸€åˆ†ä¸ºäºŒï¼Œåˆ†åˆ«è¿›è¡Œå¤„ç†ã€‚å¦‚æœå­˜åœ¨æ‡’æ ‡è®°ï¼Œè¦å…ˆæŠŠæ‡’æ ‡è®°ä¼ é€’ç»™å­èŠ‚ç‚¹ï¼ˆæ³¨æ„ä¹Ÿæ˜¯+=ï¼Œå› ä¸ºåŸæ¥å¯èƒ½å­˜åœ¨æ‡’æ ‡è®°)</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">ll mid &#x3D; (cl + cr) &#x2F; 2;\nmark[p * 2] +&#x3D; mark[p];\nmark[p * 2 + 1] +&#x3D; mark[p];<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>ä¸¤ä¸ªå­èŠ‚ç‚¹çš„å€¼ä¹Ÿå°±éœ€è¦ç›¸åº”çš„æ›´æ–°ï¼ˆåé¢ä¹˜çš„æ˜¯åŒºé—´é•¿åº¦) :[p * 2] += mark[p] * (mid - cl + 1);</p>\n<p>tree[p * 2 + 1] += mark[p] * (cr - mid);</p>\n<p>ä¸è¦å¿˜è®°æ¸…é™¤è¯¥èŠ‚ç‚¹çš„æ‡’æ ‡è®°ï¼š</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">mark[p]&#x3D;0;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>å› ä¸ºè´µæ ‡è®°å’ŒğŸ‘´ä¸€æ ·æ˜¯ä¸ªæ‡’è›‹ï¼Œåªå¾€ä¸‹ä¼ é€’ä¸€å±‚ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¹¶ä¸æ˜¯é€’å½’çš„ï¼Œä»¥åè¦ç”¨å†æ‰ç»§ç»­ä¼ é€’ã€‚å…¶å®æˆ‘ä»¬å¸¸å¸¸æŠŠè¿™ä¸ªä¼ é€’è¿‡ç¨‹å°è£…æˆä¸€ä¸ªå‡½æ•°<strong>æ‰‘å±è£†</strong> :</p>\n<pre class=\"line-numbers language-c++\" data-language=\"c++\"><code class=\"language-c++\">inline void push_down(ll p, ll len)&#123;\n    mark[p * 2] +&#x3D; mark[p];\n    mark[p * 2 + 1] +&#x3D; mark[p];\n    tree[p * 2] +&#x3D; mark[p] * (len - len &#x2F; 2);\n    tree[p * 2 + 1] +&#x3D; mark[p] * (len &#x2F; 2); &#x2F;&#x2F; å³è¾¹çš„åŒºé—´å¯èƒ½è¦çŸ­ä¸€ç‚¹\n    mark[p] &#x3D; 0;\n&#125;\n&#x2F;&#x2F;è¿™æ ·å„¿ update() é‡Œé¢è°ƒç”¨çš„æ—¶å€™ç›´æ¥ push_down(p, cr - cl + 1); å°±å½³äº<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ä¼ é€’å®Œæ ‡è®°åï¼Œå†é€’å½’åœ°å»å¤„ç†å·¦å³ä¸¤ä¸ªå­èŠ‚ç‚¹å°±å½³äºä¹</p>\n</li>\n</ol>\n<p>ä¸‹é¢å„¿ğŸ‘´åˆå·äº†ä¸ªè§†é¢‘å±•ç¤ºä¸€ä¸‹åŒºé—´ $[1,4]$ åŠ ä¸Š $1$ çš„è¿‡ç¨‹ï¼š</p>\n<p><video width=70% src=\"https://vdn1.vzuu.com/SD/534181e0-23ad-11eb-905e-ca0d7949bec0.mp4?disable_local_cache=1&auth_key=1628242679-0-0-804945d6146979c7aa1236d8806960d8&f=mp4&bu=pico&expiration=1628242679&v=hw\"></video></p>\n<p>è‡³äºå•ç‚¹ä¿®æ”¹ï¼Œåªéœ€è¦ä»¤å·¦å³ç«¯ç‚¹ç›¸ç­‰å³å¯~</p>\n<h3 id=\"åŒºé—´æŸ¥è¯¢-query\"><a href=\"#åŒºé—´æŸ¥è¯¢-query\" class=\"headerlink\" title=\"åŒºé—´æŸ¥è¯¢(query)\"></a>åŒºé—´æŸ¥è¯¢(query)</h3><p>è¿˜å°±é‚£ä¸ªç›´æ¥ä¸ŠğŸ´</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">ll <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>ll l<span class=\"token punctuation\">,</span> ll r<span class=\"token punctuation\">,</span> ll p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll cl <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll cr <span class=\"token operator\">=</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">></span> r <span class=\"token operator\">||</span> cr <span class=\"token operator\">&lt;</span> l<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">>=</span> l <span class=\"token operator\">&amp;&amp;</span> cr <span class=\"token operator\">&lt;=</span> r<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n        ll mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">+</span> cr<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> cl<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n        <span class=\"token comment\">// ä¸Šä¸€è¡Œæ‹†æˆä¸‰è¡Œå†™å°±å’ŒåŒºé—´ä¿®æ”¹æ ¼å¼ä¸€è‡´äº†</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ä¸€æ ·çš„é€’å½’ï¼Œä¸€æ ·è‡ªé¡¶è‡³åº•åœ°å¯»æ‰¾ï¼Œä¸€æ ·çš„åˆå¹¶ä¿¡æ¯ï¼Œå³æ’å³ç”¨ğŸ˜</p>\n<h2 id=\"æ¨¡æ¿\"><a href=\"#æ¨¡æ¿\" class=\"headerlink\" title=\"æ¨¡æ¿\"></a>æ¨¡æ¿</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>source : <strong>æ´›è°·P3372 ã€æ¨¡æ¿ã€‘çº¿æ®µæ ‘ 1</strong></p>\n<p><strong>é¢˜ç›®æè¿°</strong><br>å¦‚é¢˜ï¼Œå·²çŸ¥ä¸€ä¸ªæ•°åˆ—ï¼Œä½ éœ€è¦è¿›è¡Œä¸‹é¢ä¸¤ç§æ“ä½œï¼š<br>1.å°†æŸåŒºé—´æ¯ä¸€ä¸ªæ•°åŠ ä¸Šx<br>2.æ±‚å‡ºæŸåŒºé—´æ¯ä¸€ä¸ªæ•°çš„å’Œ<br><strong>è¾“å…¥æ ¼å¼</strong><br>ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°Nã€Mï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥æ•°åˆ—æ•°å­—çš„ä¸ªæ•°å’Œæ“ä½œçš„æ€»ä¸ªæ•°ã€‚<br>ç¬¬äºŒè¡ŒåŒ…å«Nä¸ªç”¨ç©ºæ ¼åˆ†éš”çš„æ•´æ•°ï¼Œå…¶ä¸­ç¬¬iä¸ªæ•°å­—è¡¨ç¤ºæ•°åˆ—ç¬¬ié¡¹çš„åˆå§‹å€¼ã€‚<br>æ¥ä¸‹æ¥Mè¡Œæ¯è¡ŒåŒ…å«3æˆ–4ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ“ä½œï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br>æ“ä½œ1ï¼š æ ¼å¼ï¼š1 x y k å«ä¹‰ï¼šå°†åŒºé—´[x,y]å†…æ¯ä¸ªæ•°åŠ ä¸Šk<br>æ“ä½œ2ï¼š æ ¼å¼ï¼š2 x y å«ä¹‰ï¼šè¾“å‡ºåŒºé—´[x,y]å†…æ¯ä¸ªæ•°çš„å’Œ<br><strong>è¾“å‡ºæ ¼å¼</strong><br>è¾“å‡ºåŒ…å«è‹¥å¹²è¡Œæ•´æ•°ï¼Œå³ä¸ºæ‰€æœ‰æ“ä½œ2çš„ç»“æœã€‚</p></blockquote>\n<hr>\n<p>tips: æœ¬æ¨¡æ¿åˆ†ä¸ºé¾™é¸£ç‰ˆå’Œè´µæ—ç‰ˆ</p>\n<h3 id=\"é¾™é¸£version\"><a href=\"#é¾™é¸£version\" class=\"headerlink\" title=\"é¾™é¸£version\"></a>é¾™é¸£version</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>(æ­¤é¾™é¸£éå½¼é¾™é¸£ï¼Œæ„ä¸ºæŠŠä¸Šé¢çš„é¾™é¸£ğŸ´æ•´åˆèµ·æ¥):</p></blockquote>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">MAXN</span> <span class=\"token expression\"><span class=\"token number\">100005</span></span></span>\nll n<span class=\"token punctuation\">,</span> m<span class=\"token punctuation\">,</span> A<span class=\"token punctuation\">[</span>MAXN<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> tree<span class=\"token punctuation\">[</span>MAXN <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> mark<span class=\"token punctuation\">[</span>MAXN <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> \n<span class=\"token keyword\">inline</span> <span class=\"token keyword\">void</span> <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span>ll p<span class=\"token punctuation\">,</span> ll len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    mark<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    mark<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">-</span> len <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">build</span><span class=\"token punctuation\">(</span>ll l <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll r <span class=\"token operator\">=</span> n<span class=\"token punctuation\">,</span> ll p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>l <span class=\"token operator\">==</span> r<span class=\"token punctuation\">)</span>\n        tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>l<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n        ll mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>l <span class=\"token operator\">+</span> r<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">build</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">build</span><span class=\"token punctuation\">(</span>mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>ll l<span class=\"token punctuation\">,</span> ll r<span class=\"token punctuation\">,</span> ll d<span class=\"token punctuation\">,</span> ll p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll cl <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll cr <span class=\"token operator\">=</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">></span> r <span class=\"token operator\">||</span> cr <span class=\"token operator\">&lt;</span> l<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">>=</span> l <span class=\"token operator\">&amp;&amp;</span> cr <span class=\"token operator\">&lt;=</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span>cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> d<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cr <span class=\"token operator\">></span> cl<span class=\"token punctuation\">)</span>\n            mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> d<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n        ll mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">+</span> cr<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> cl<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\nll <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>ll l<span class=\"token punctuation\">,</span> ll r<span class=\"token punctuation\">,</span> ll p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll cl <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ll cr <span class=\"token operator\">=</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">></span> r <span class=\"token operator\">||</span> cr <span class=\"token operator\">&lt;</span> l<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">>=</span> l <span class=\"token operator\">&amp;&amp;</span> cr <span class=\"token operator\">&lt;=</span> r<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n        ll mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">+</span> cr<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> cl<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    n <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    m <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> n<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span>\n        A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> m<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        ll opr <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> l <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> r <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>opr <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n            ll d <span class=\"token operator\">=</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n            <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%lld\\n\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"è´µæ—version\"><a href=\"#è´µæ—version\" class=\"headerlink\" title=\"è´µæ—version\"></a>è´µæ—version</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><del>è±ªåå‡çº§plus</del>ï¼Œæœ¬æ¥æƒ³åŠ ä¸ªä¹˜é™¤çš„å‘ç°æ¿å­ä¸å…¼å®¹ï¼ŒğŸ‘´æ˜¯æ‡’ç‹—</p></blockquote>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> MAXN <span class=\"token operator\">=</span> <span class=\"token number\">1e5</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\nll tree<span class=\"token punctuation\">[</span>MAXN <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> mark<span class=\"token punctuation\">[</span>MAXN <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">,</span> m<span class=\"token punctuation\">,</span> A<span class=\"token punctuation\">[</span>MAXN<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> p<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">-</span> len <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mark<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>len <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mark<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cl <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cr <span class=\"token operator\">=</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">==</span> cr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>cl<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">int</span> mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">+</span> cr<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">build</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cl<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">build</span><span class=\"token punctuation\">(</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\nll <span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> l<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> r<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cl <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cr <span class=\"token operator\">=</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">>=</span> l <span class=\"token operator\">&amp;&amp;</span> cr <span class=\"token operator\">&lt;=</span> r<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    ll mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">+</span> cr<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> ans <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mid <span class=\"token operator\">>=</span> l<span class=\"token punctuation\">)</span> ans <span class=\"token operator\">+=</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cl<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mid <span class=\"token operator\">&lt;</span> r<span class=\"token punctuation\">)</span> ans <span class=\"token operator\">+=</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> ans<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>   \n<span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> l<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> r<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> d<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> p <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cl <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> cr <span class=\"token operator\">=</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">>=</span> l <span class=\"token operator\">&amp;&amp;</span> cr <span class=\"token operator\">&lt;=</span> r<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> d <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> mark<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> d<span class=\"token punctuation\">;</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token function\">push_down</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">,</span> cr <span class=\"token operator\">-</span> cl <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> mid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>cl <span class=\"token operator\">+</span> cr<span class=\"token punctuation\">)</span> <span class=\"token operator\">>></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mid <span class=\"token operator\">>=</span> l<span class=\"token punctuation\">)</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cl<span class=\"token punctuation\">,</span> mid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mid <span class=\"token operator\">&lt;</span> r<span class=\"token punctuation\">)</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">,</span> d<span class=\"token punctuation\">,</span> p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> mid <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    tree<span class=\"token punctuation\">[</span>p<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> tree<span class=\"token punctuation\">[</span>p <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"å¸¸è§æ¨¡å‹\"><a href=\"#å¸¸è§æ¨¡å‹\" class=\"headerlink\" title=\"å¸¸è§æ¨¡å‹\"></a>å¸¸è§æ¨¡å‹</h2><p>æ­¥éª¤ï¼š</p>\n<ol>\n<li>å°†é—®é¢˜è½¬åŒ–æˆç‚¹ä¿¡æ¯å’Œç›®æ ‡ä¿¡æ¯</li>\n<li>å°†ç›®æ ‡ä¿¡æ¯æ ¹æ®éœ€è¦æ‰©å……æˆåŒºé—´ä¿¡æ¯<ul>\n<li>å¢åŠ ä¿¡æ¯ç¬¦åˆåŒºé—´åŠ æ³•</li>\n<li>å¢åŠ æ ‡è®°æ”¯æŒåŒºé—´æ“ä½œ</li>\n</ul>\n</li>\n<li>ä»£ç ä¸­çš„ä¸»è¦æ¨¡å—ï¼šåŒºé—´åŠ æ³•ï¼Œæ ‡è®°ä¸‹æ¨ï¼Œç‚¹ä¿¡æ¯-&gt;åŒºé—´ä¿¡æ¯ï¼Œå„ç§æ“ä½œ(ä¿®æ”¹ã€æŸ¥è¯¢â€¦)</li>\n</ol>\n<h3 id=\"å­—ç¬¦ä¸²å“ˆå¸Œ\"><a href=\"#å­—ç¬¦ä¸²å“ˆå¸Œ\" class=\"headerlink\" title=\"å­—ç¬¦ä¸²å“ˆå¸Œ\"></a>å­—ç¬¦ä¸²å“ˆå¸Œ</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>URAL1989 Subpalindromes  <a href=\"https://blog.csdn.net/zearot/article/details/38921403\">é¢˜è§£</a></p>\n<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²(é•¿åº¦&lt;=100000)ï¼Œæœ‰ä¸¤ä¸ªæ“ä½œã€‚  1ï¼šæ”¹å˜æŸä¸ªå­—ç¬¦ã€‚ 2ï¼šåˆ¤æ–­æŸä¸ªå­ä¸²æ˜¯å¦æ„æˆå›æ–‡ä¸²</p></blockquote>\n<p>åˆ†æï¼š</p>\n<p>ç›´æ¥åˆ¤æ–­ä¼šè¶…æ—¶ï¼Œæ­¤å¤„ç”¨ <strong>çº¿æ®µæ ‘ç»´æŠ¤å­—ç¬¦ä¸²å“ˆå¸Œ</strong></p>\n<p>å¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²$a[0],a[1],â€¦,a[n-1] $å®ƒå¯¹åº”çš„å“ˆå¸Œå‡½æ•°ä¸º$a[0]+a[1]*K + a[2]*K^2 +â€¦+a[n-1]*K^{n-1}$</p>\n<p>å†ç»´æŠ¤ä¸€ä¸ªä»å³å¾€å·¦çš„å“ˆå¸Œå€¼ï¼š</p>\n<p>$a[0]*K^{n-1} + a[1]*K^{n-2} +â€¦+a[n-1]$</p>\n<p><strong>è‹¥æ˜¯å›æ–‡ä¸²ï¼Œåˆ™å·¦å³çš„å“ˆå¸Œå€¼ä¼šç›¸ç­‰ã€‚è€Œå·¦å³å“ˆå¸Œå€¼ç›¸ç­‰ï¼Œåˆ™å¾ˆå¤§å¯èƒ½è¿™æ˜¯å›æ–‡ä¸²ã€‚</strong></p>\n<p>è‹¥å‡ºç°è¯¯åˆ¤ï¼Œå¯ä»¥å†ç”¨ä¸€ä¸ªK2ï¼Œè¿›è¡ŒäºŒæ¬¡å“ˆå¸Œåˆ¤æ–­ï¼Œå¯ä»¥å‡å°è¯¯åˆ¤æ¦‚ç‡ã€‚å®ç°ä¸Šï¼Œå“ˆå¸Œå€¼æœ€å¥½å¯¹æŸä¸ªè´¨æ•°å–ä½™æ•°ï¼Œè¿™æ ·åˆ†å¸ƒæ›´å‡åŒ€ã€‚</p>\n<p>è§£é¢˜æ¨¡å‹ï¼š</p>\n<ul>\n<li>ç›®æ ‡ä¿¡æ¯ï¼šæŸä¸ªåŒºé—´çš„å·¦ï¼Œå³å“ˆå¸Œå€¼</li>\n<li>ç‚¹ä¿¡æ¯ï¼šä¸€ä¸ªå­—ç¬¦</li>\n</ul>\n<p>ç›®æ ‡ä¿¡æ¯å·²ç»ç¬¦åˆåŒºé—´åŠ æ³•ï¼Œæ‰€ä»¥<strong>åŒºé—´ä¿¡æ¯=ç›®æ ‡ä¿¡æ¯</strong></p>\n<p>æ•…çº¿æ®µæ ‘ç»“æ„ï¼š</p>\n<ul>\n<li><p><strong>åŒºé—´ä¿¡æ¯</strong>ï¼šåŒºé—´å“ˆå¸Œå€¼</p>\n</li>\n<li><p><strong>ç‚¹ä¿¡æ¯</strong>ï¼šä¸€ä¸ªå­—ç¬¦</p>\n</li>\n</ul>\n<p>æ ¸å¿ƒï¼šå°±æ˜¯æ‰¾åˆ°<strong>åŒºé—´ä¿¡æ¯</strong>ï¼Œ å†™å¥½<strong>åŒºé—´åŠ æ³•</strong></p>\n<h3 id=\"æœ€é•¿è¿ç»­é›¶\"><a href=\"#æœ€é•¿è¿ç»­é›¶\" class=\"headerlink\" title=\"æœ€é•¿è¿ç»­é›¶\"></a>æœ€é•¿è¿ç»­é›¶</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Codeforces 527C Glass Carving <a href=\"https://blog.csdn.net/zearot/article/details/44759437\">é¢˜è§£</a></p>\n<p>ç»™å®šä¸€ä¸ªçŸ©å½¢ï¼Œä¸åœåœ°çºµå‘/æ¨ªå‘åˆ‡å‰²ï¼Œé—®æ¯æ¬¡åˆ‡å‰²åï¼Œæœ€å¤§çš„çŸ©å½¢é¢ç§¯æ˜¯å¤šå°‘</p></blockquote>\n<p>åˆ†æï¼š</p>\n<p>æœ€å¤§çŸ©å½¢é¢ç§¯=æœ€é•¿çš„é•¿*æœ€å®½çš„å®½</p>\n<p>é•¿å®½èŒƒå›´å‡ä¸º1e5ï¼Œæ•…ç”¨01åºåˆ—è¡¨ç¤ºæ¯ä¸ªç‚¹æ˜¯å¦è¢«åˆ‡å‰²</p>\n<p>æœ€é•¿çš„é•¿å°±æ˜¯é•¿çš„æœ€é•¿è¿ç»­0çš„æ•°é‡+1ï¼Œå®½åŒç†ï¼Œäºæ˜¯å¯ç”¨ç”¨çº¿æ®µæ ‘ç»´æŠ¤æœ€é•¿è¿ç»­é›¶</p>\n<p>è§£é¢˜æ¨¡å‹ï¼š</p>\n<ul>\n<li>ç›®æ ‡ä¿¡æ¯ï¼šåŒºé—´æœ€é•¿è¿ç»­é›¶çš„ä¸ªæ•°</li>\n<li>ç‚¹ä¿¡æ¯ï¼š0æˆ–1</li>\n</ul>\n<p>ç”±äºç›®æ ‡ä¿¡æ¯ä¸ç¬¦åˆåŒºé—´åŠ æ³•ï¼Œæ‰€ä»¥è¦æ‰©å……ç›®æ ‡ä¿¡æ¯</p>\n<p>æ•…çº¿æ®µæ ‘ç»“æ„ï¼š</p>\n<ul>\n<li><strong>åŒºé—´ä¿¡æ¯</strong>ï¼šä»å·¦ï¼Œå³å¼€å§‹çš„æœ€é•¿è¿ç»­é›¶ï¼Œæœ¬åŒºé—´æ˜¯å¦å…¨é›¶ï¼Œæœ¬åŒºé—´æœ€é•¿è¿ç»­é›¶</li>\n<li><strong>ç‚¹ä¿¡æ¯</strong>ï¼š0æˆ–1</li>\n</ul>\n<h3 id=\"è®¡æ•°æ’åº\"><a href=\"#è®¡æ•°æ’åº\" class=\"headerlink\" title=\"è®¡æ•°æ’åº\"></a>è®¡æ•°æ’åº</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Codeforces 558E A Simple Task <a href=\"https://blog.csdn.net/zearot/article/details/48048559\">é¢˜è§£</a></p>\n<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸è¶…è¿‡1e5çš„å­—ç¬¦ä¸²ï¼ˆå°å†™è‹±æ–‡å­—æ¯ï¼‰ï¼Œå’Œä¸è¶…è¿‡5000ä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œ L R K è¡¨ç¤ºç»™åŒºé—´[L,R]çš„å­—ç¬¦ä¸²æ’åºï¼ŒK=1ä¸ºå‡åºï¼ŒK=0ä¸ºé™åºã€‚ æœ€åè¾“å‡ºæœ€ç»ˆçš„å­—ç¬¦ä¸²</p></blockquote>\n<p>è§£é¢˜æ¨¡å‹ï¼š</p>\n<ul>\n<li>ç›®æ ‡ä¿¡æ¯ï¼šåŒºé—´çš„è®¡æ•°æ’åºç»“æœ</li>\n<li>ç‚¹ä¿¡æ¯ï¼šä¸€ä¸ªå­—ç¬¦</li>\n</ul>\n<p>ç›®æ ‡ä¿¡æ¯æ˜¯ç¬¦åˆåŒºé—´åŠ æ³•çš„ï¼Œä½†æ˜¯ä¸ºäº†æ”¯æŒåŒºé—´æ“ä½œï¼Œè¿˜æ˜¯éœ€è¦æ‰©å……ä¿¡æ¯</p>\n<p>æ•…çº¿æ®µæ ‘ç»“æ„ï¼š</p>\n<ul>\n<li><strong>ç›®æ ‡ä¿¡æ¯</strong>ï¼šåŒºé—´çš„è®¡æ•°æ’åºç»“æœï¼Œæ’åºæ ‡è®°ï¼Œæ’åºç§ç±»ï¼ˆå‡é™ï¼‰</li>\n<li><strong>ç‚¹ä¿¡æ¯</strong>ï¼šä¸€ä¸ªå­—ç¬¦</li>\n</ul>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>To be continuedâ€¦</p></blockquote>\n","text":"çº¿æ®µæ ‘Segment Tree ä¸€ä¸ªé—®é¢˜ï¼Œåªè¦èƒ½åŒ–æˆå¯¹ä¸€äº›è¿ç»­ç‚¹çš„ä¿®æ”¹å’Œç»Ÿè®¡é—®é¢˜ï¼ŒåŸºæœ¬å°±å¯ä»¥ç”¨çº¿æ®µæ ‘æ¥è‰¹äº† åŸç†ï¼šå°†[1,n]åˆ†è§£æˆè‹¥å¹²ç‰¹å®šçš„å­åŒºé—´(æ•°é‡ä¸è¶…è¿‡4*n),ç„¶åï¼Œå°†æ¯ä¸ªåŒºé—´[L,R]éƒ½åˆ†è§£ä¸ºå°‘é‡ç‰¹å®šçš„å­åŒºé—´ï¼Œé€šè¿‡å¯¹è¿™äº›å°‘é‡å­åŒºé—´çš„ä¿®æ”¹æˆ–è€…ç»Ÿè®¡ï¼Œæ¥å®ç°å¿«é€Ÿå¯¹[L,R]...","link":"","photos":[],"count_time":{"symbolsCount":"8.6k","symbolsTime":"8 mins."},"categories":[{"name":"ALGORITHMS","slug":"ALGORITHMS","count":5,"path":"api/categories/ALGORITHMS.json"}],"tags":[{"name":"ACM","slug":"ACM","count":15,"path":"api/tags/ACM.json"},{"name":"note","slug":"note","count":9,"path":"api/tags/note.json"},{"name":"algorithm","slug":"algorithm","count":7,"path":"api/tags/algorithm.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%BA%BF%E6%AE%B5%E6%A0%91\"><span class=\"toc-text\">çº¿æ®µæ ‘</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">æ“ä½œ</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BB%BA%E6%A0%91-build\"><span class=\"toc-text\">å»ºæ ‘ (build)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8C%BA%E9%97%B4%E4%BF%AE%E6%94%B9-update\"><span class=\"toc-text\">åŒºé—´ä¿®æ”¹(update)</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8C%BA%E9%97%B4%E6%9F%A5%E8%AF%A2-query\"><span class=\"toc-text\">åŒºé—´æŸ¥è¯¢(query)</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E6%9D%BF\"><span class=\"toc-text\">æ¨¡æ¿</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%BE%99%E9%B8%A3version\"><span class=\"toc-text\">é¾™é¸£version</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%B4%B5%E6%97%8Fversion\"><span class=\"toc-text\">è´µæ—version</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E8%A7%81%E6%A8%A1%E5%9E%8B\"><span class=\"toc-text\">å¸¸è§æ¨¡å‹</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%93%88%E5%B8%8C\"><span class=\"toc-text\">å­—ç¬¦ä¸²å“ˆå¸Œ</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E9%9B%B6\"><span class=\"toc-text\">æœ€é•¿è¿ç»­é›¶</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F\"><span class=\"toc-text\">è®¡æ•°æ’åº</span></a></li></ol></li></ol></li></ol>","author":{"name":"Maskros","slug":"blog-author","avatar":"/img/logo_Maskros.jpg","link":"/","description":"Be Legendary within the hasty keys","socials":{"github":"https://github.com/Maskros-new","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-bilibili-line","link":"https://space.bilibili.com/355516889"},"codeforces":{"icon":"iconfont icon-codeforces","link":"https://codeforces.com/profile/1ronMaker"},"mail":{"icon":"iconfont icon-mail","link":"mailto:1164528260@qq.com"}}}},"mapped":true,"prev_post":{"title":"STLä½¿ç”¨æ‰‹å†Œ","uid":"0b411eca06d29c39e2fc21f5cd175527","slug":"STLä½¿ç”¨æ‰‹å†Œ","date":"2021-08-13T06:15:31.000Z","updated":"2022-01-22T09:38:07.375Z","comments":true,"path":"api/articles/STLä½¿ç”¨æ‰‹å†Œ.json","keywords":null,"cover":"https://img0.baidu.com/it/u=1597304645,862627513&fm=26&fmt=auto&gp=0.jpg","text":"STLä½¿ç”¨æ‰‹å†ŒStandard Template Library åˆåã€ŠğŸ‘´æ€•å¿˜äº†å…ˆæŠŠä»–å†™ä¸‹æ¥ã€‹ æˆ‘ æ˜¯ è° ?æ–¯ä¸¹å¾·å„¿çš„ å¦æ™®é›·ç‰¹ è±åšç‘ å³æ ‡å‡†æ¨¡æ¿åº“ é‡è¦ç‰¹ç‚¹ï¼šæ•°æ®ç»“æ„å’Œç®—æ³•çš„åˆ†ç¦» é‡è¦ç‰¹æ€§ï¼šä¸æ˜¯é¢å‘å¯¹è±¡çš„ é€»è¾‘å±‚æ¬¡ï¼šä½“ç°äº†æ³›å‹åŒ–ç¨‹åºè®¾è®¡çš„æ€æƒ³ å®ç°å±‚æ¬¡ï¼šä»¥ä¸€ç§ç±»å‹å‚æ•°åŒ–çš„æ–¹...","link":"","photos":[],"count_time":{"symbolsCount":"6k","symbolsTime":"5 mins."},"categories":[{"name":"ALGORITHMS","slug":"ALGORITHMS","count":5,"path":"api/categories/ALGORITHMS.json"}],"tags":[{"name":"ACM","slug":"ACM","count":15,"path":"api/tags/ACM.json"},{"name":"note","slug":"note","count":9,"path":"api/tags/note.json"},{"name":"algorithm","slug":"algorithm","count":7,"path":"api/tags/algorithm.json"}],"author":{"name":"Maskros","slug":"blog-author","avatar":"/img/logo_Maskros.jpg","link":"/","description":"Be Legendary within the hasty keys","socials":{"github":"https://github.com/Maskros-new","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-bilibili-line","link":"https://space.bilibili.com/355516889"},"codeforces":{"icon":"iconfont icon-codeforces","link":"https://codeforces.com/profile/1ronMaker"},"mail":{"icon":"iconfont icon-mail","link":"mailto:1164528260@qq.com"}}}}},"next_post":{"title":"åšå¼ˆè®º","uid":"1f59b3eb6e524ce1c0f6b34920ea6c38","slug":"åšå¼ˆè®º","date":"2021-07-31T01:51:28.000Z","updated":"2022-01-22T09:45:47.616Z","comments":true,"path":"api/articles/åšå¼ˆè®º.json","keywords":null,"cover":"http://img.mp.itc.cn/upload/20160916/f7f2d7ebe46b4a49ae4bd4baf8e30044_th.png","text":"åšå¼ˆè®ºGame Theory Nimæ¸¸æˆå±äº ICG (Impartial Combinatorial Games) çš„ä¸€ç§ï¼Œæ»¡è¶³æ¡ä»¶å¦‚ä¸‹ï¼š ä¸¤åé€‰æ‰‹äº¤æ›¿ç§»åŠ¨ï¼Œåœ¨æœ‰é™çš„åˆæ³•ç§»åŠ¨é›†åˆä¸­ä»»é€‰ä¸€ç§è¿›è¡Œç§»åŠ¨ å¯¹äºä»»ä½•ä¸€ç§å±€é¢ï¼Œåˆæ³•çš„ç§»åŠ¨é›†åˆåªå–å†³äºå±€é¢æœ¬èº« åˆ°è°æ— æ³•ç§»åŠ¨è°å°±è¾“äº† ä»¥ä¸‹ç»™å‡º...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"ALGORITHMS","slug":"ALGORITHMS","count":5,"path":"api/categories/ALGORITHMS.json"}],"tags":[{"name":"ACM","slug":"ACM","count":15,"path":"api/tags/ACM.json"},{"name":"note","slug":"note","count":9,"path":"api/tags/note.json"},{"name":"algorithm","slug":"algorithm","count":7,"path":"api/tags/algorithm.json"}],"author":{"name":"Maskros","slug":"blog-author","avatar":"/img/logo_Maskros.jpg","link":"/","description":"Be Legendary within the hasty keys","socials":{"github":"https://github.com/Maskros-new","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"iconfont icon-bilibili-line","link":"https://space.bilibili.com/355516889"},"codeforces":{"icon":"iconfont icon-codeforces","link":"https://codeforces.com/profile/1ronMaker"},"mail":{"icon":"iconfont icon-mail","link":"mailto:1164528260@qq.com"}}}}}}